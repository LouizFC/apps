{"version":3,"sources":["Component/FaceIcon.tsx","Descriptor/RarityDescriptor.tsx","Component/ClassIcon.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/react-bootstrap/esm/Table.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","Page/ServantsPage.tsx"],"names":["FaceIcon","alt","src","this","props","location","style","height","React","Component","assetMap","Map","RarityDescriptor","has","rarity","get","classTypes","classIds","ClassName","SABER","ARCHER","LANCER","RIDER","CASTER","ASSASSIN","BERSERKER","SHIELDER","RULER","ALTER_EGO","AVENGER","MOON_CANCER","FOREIGNER","GRAND_CASTER","BEAST_I","BEAST_II","BEAST_IIIL","BEAST_IIIR","BEAST_UNKNOWN","ALL","EXTRA","ClassIcon","classId","className","type","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","_arrayLikeToArray","len","length","i","arr2","Table","forwardRef","_ref","ref","bsPrefix","striped","bordered","borderless","hover","size","variant","responsive","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","_unsupportedIterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","test","classFilters","ServantsPage","state","loading","servants","activeClassFilters","activeRarityFilters","Manager","setRegion","region","Api","servantList","then","setState","e","error","indexOf","exists","activeFilters","filter","activeClassName","push","activeClass","activeRarity","list","reverse","entity","x","isExtra","search","words","split","word","map","toLowerCase","every","includes","id","inline","justifyContent","active","isClassFilterActive","key","opacity","onClick","ev","toggleClassFilter","Control","marginLeft","placeholder","value","onChange","target","textAlign","width","servant","index","route","collectionNo","align","to","face"],"mappings":"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","file":"static/js/12.a68647a3.chunk.js","sourcesContent":["import EntityType from \"@atlasacademy/api-connector/dist/Enum/EntityType\";\nimport React from \"react\";\n\ninterface IProps {\n    type?: EntityType;\n    rarity?: number;\n    location: string;\n    height?: number | string;\n}\n\nclass FaceIcon extends React.Component<IProps> {\n\n    render() {\n        return (\n            <img alt={''} src={this.props.location}\n                 style={{height: this.props.height ?? '2em'}}/>\n        );\n    }\n\n}\n\nexport default FaceIcon;\n","import React from \"react\";\n\nconst assetMap = new Map<number, string>([\n    [1, './assets/star1.png'],\n    [2, './assets/star2.png'],\n    [3, './assets/star3.png'],\n    [4, './assets/star4.png'],\n    [5, './assets/star5.png'],\n]);\n\ninterface IProps {\n    rarity: number;\n    height?: number;\n}\n\nclass RarityDescriptor extends React.Component<IProps> {\n    render() {\n        return (\n            <span>\n                {assetMap.has(this.props.rarity) ? (\n                    <img alt={`${this.props.rarity} star(s)`}\n                         src={assetMap.get(this.props.rarity)}\n                         style={{height: this.props.height ?? 18}}/>\n                ) : null}\n            </span>\n        );\n    }\n}\n\nexport default RarityDescriptor;\n","import {ClassName} from \"@atlasacademy/api-connector\";\nimport React from \"react\";\n\nconst classTypes = new Map<number, number>([\n    [0, 0],\n    [1, 1],\n    [2, 1],\n    [3, 2],\n    [4, 3],\n    [5, 3],\n]);\nconst unknownClassType = 3;\nconst classIds = new Map<ClassName, number>([\n    [ClassName.SABER, 1],\n    [ClassName.ARCHER, 2],\n    [ClassName.LANCER, 3],\n    [ClassName.RIDER, 4],\n    [ClassName.CASTER, 5],\n    [ClassName.ASSASSIN, 6],\n    [ClassName.BERSERKER, 7],\n    [ClassName.SHIELDER, 8],\n    [ClassName.RULER, 9],\n    [ClassName.ALTER_EGO, 10],\n    [ClassName.AVENGER, 11],\n    [ClassName.MOON_CANCER, 23],\n    [ClassName.FOREIGNER, 25],\n    [ClassName.GRAND_CASTER, 5],\n    [ClassName.BEAST_I, 20],\n    [ClassName.BEAST_II, 20],\n    [ClassName.BEAST_IIIL, 20],\n    [ClassName.BEAST_IIIR, 20],\n    [ClassName.BEAST_UNKNOWN, 20],\n\n    [ClassName.ALL, 1001],\n    [ClassName.EXTRA, 1002],\n]);\nconst unknownClassId = 12;\n\ninterface IProps {\n    className: ClassName;\n    rarity?: number;\n    height?: number;\n}\n\nclass ClassIcon extends React.Component<IProps> {\n    render() {\n        return (\n            <img alt={''} src={this.location()}\n                 style={{height: this.props.height ?? 24}}/>\n        );\n    }\n\n    private location(): string {\n        let classId = classIds.has(this.props.className) ? classIds.get(this.props.className) : unknownClassId,\n            rarity = this.props.rarity ?? 5,\n            type = classTypes.has(rarity) ? classTypes.get(rarity) : unknownClassType;\n\n        return `https://assets.atlasacademy.io/GameData/NA/ClassIcons/class${type}_${classId}.png`;\n    }\n}\n\nexport default ClassIcon;\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import {ClassName, Region, ServantBasic} from \"@atlasacademy/api-connector\";\nimport {AxiosError} from \"axios\";\nimport React from \"react\";\nimport {Form, Table} from \"react-bootstrap\";\nimport {Link} from \"react-router-dom\";\nimport Api from \"../Api\";\nimport ClassIcon from \"../Component/ClassIcon\";\nimport ErrorStatus from \"../Component/ErrorStatus\";\nimport FaceIcon from \"../Component/FaceIcon\";\nimport Loading from \"../Component/Loading\";\nimport RarityDescriptor from \"../Descriptor/RarityDescriptor\";\n\nimport './ServantsPage.css';\nimport Manager from \"../Setting/Manager\";\n\nconst classFilters: ClassName[] = [\n    ClassName.SABER,\n    ClassName.ARCHER,\n    ClassName.LANCER,\n    ClassName.RIDER,\n    ClassName.CASTER,\n    ClassName.ASSASSIN,\n    ClassName.BERSERKER,\n    ClassName.EXTRA,\n];\n\ninterface ChangeEvent extends React.ChangeEvent<HTMLInputElement> {\n\n}\n\ninterface MouseEvent extends React.MouseEvent<HTMLInputElement> {\n\n}\n\ninterface IProps {\n    region: Region,\n}\n\ninterface IState {\n    error?: AxiosError;\n    loading: boolean;\n    servants: ServantBasic[];\n    activeClassFilters: ClassName[];\n    activeRarityFilters: number[];\n    search?: string;\n}\n\nclass ServantsPage extends React.Component<IProps, IState> {\n\n    constructor(props: IProps) {\n        super(props);\n\n        this.state = {\n            loading: true,\n            servants: [],\n            activeClassFilters: [],\n            activeRarityFilters: [],\n        };\n    }\n\n    componentDidMount() {\n        try {\n            Manager.setRegion(this.props.region);\n            Api.servantList().then(servantList => {\n                this.setState({\n                    loading: false,\n                    servants: servantList\n                });\n            });\n        } catch (e) {\n            this.setState({\n                error: e\n            });\n        }\n    }\n\n    private isClassFilterActive(className: ClassName): boolean {\n        return this.state.activeClassFilters.indexOf(className) !== -1;\n    }\n\n    private isExtra(className: ClassName): boolean {\n        return !(className === ClassName.SABER\n            || className === ClassName.ARCHER\n            || className === ClassName.LANCER\n            || className === ClassName.RIDER\n            || className === ClassName.CASTER\n            || className === ClassName.ASSASSIN\n            || className === ClassName.BERSERKER);\n    }\n\n    private toggleClassFilter(className: ClassName): void {\n        let exists = false,\n            activeFilters = this.state.activeClassFilters.filter(activeClassName => {\n                if (activeClassName === ClassName.ALL)\n                    return false;\n\n                if (activeClassName === className) {\n                    exists = true;\n                    return false;\n                }\n\n                return true;\n            });\n\n        if (!exists)\n            activeFilters.push(className);\n\n        this.setState({activeClassFilters: activeFilters});\n    }\n\n    private toggleRarityFilter(rarity: number): void {\n        const exists = this.state.activeRarityFilters.indexOf(rarity) !== -1;\n\n        if (exists) {\n            this.setState({\n                activeClassFilters: this.state.activeClassFilters.filter(activeClass => activeClass !== ClassName.ALL),\n                activeRarityFilters: this.state.activeRarityFilters.filter(activeRarity => activeRarity !== rarity)\n            });\n        } else {\n            this.setState({\n                activeClassFilters: this.state.activeClassFilters.filter(activeClass => activeClass !== ClassName.ALL),\n                activeRarityFilters: [\n                    ...this.state.activeRarityFilters,\n                    rarity\n                ]\n            });\n        }\n    }\n\n    private servants(): ServantBasic[] {\n        let list = this.state.servants.slice().reverse();\n\n        if (this.state.activeRarityFilters.length > 0) {\n            list = list.filter(entity => {\n                return this.state.activeRarityFilters.indexOf(entity.rarity) !== -1;\n            });\n        }\n\n        if (this.state.activeClassFilters.length > 0) {\n            list = list.filter(entity => {\n                for (let x in this.state.activeClassFilters) {\n                    const className = this.state.activeClassFilters[x];\n\n                    if (className === ClassName.EXTRA && this.isExtra(entity.className)) {\n                        return true;\n                    } else if (entity.className === className) {\n                        return true;\n                    }\n                }\n\n                return false;\n            });\n        }\n\n        if (this.state.search) {\n            const words = this.state.search\n                .split(' ')\n                .filter(word => word)\n                .map(word => word.toLowerCase());\n\n            list = list.filter(entity => words.every(word => entity.name.toLowerCase().includes(word)));\n        }\n\n        return list;\n    }\n\n    render() {\n        if (this.state.error)\n            return <ErrorStatus error={this.state.error}/>;\n\n        if (this.state.loading)\n            return <Loading/>;\n\n        return (\n            <div id=\"servants\">\n                <Form inline style={{justifyContent: 'center'}}>\n                    {classFilters.map(className => {\n                        const active = this.isClassFilterActive(className);\n                        return (\n                            <span key={className}\n                                  className={'filter'}\n                                  style={{opacity: active ? 1 : 0.5}}\n                                  onClick={(ev: MouseEvent) => {\n                                      this.toggleClassFilter(className);\n                                  }}>\n                                <ClassIcon height={50} rarity={active ? 5 : 3} className={className}/>\n                            </span>\n                        );\n                    })}\n                    <Form.Control style={{marginLeft: 'auto'}} placeholder={'Search'} value={this.state.search ?? ''}\n                                  onChange={(ev: ChangeEvent) => {\n                                      this.setState({search: ev.target.value});\n                                  }}/>\n                </Form>\n\n                <hr/>\n\n                <Table striped bordered hover responsive>\n                    <thead>\n                    <tr>\n                        <th style={{textAlign: \"center\", width: '1px'}}>#</th>\n                        <th style={{textAlign: \"center\", width: '1px'}}>Class</th>\n                        <th style={{textAlign: \"center\", width: '1px'}}>Thumbnail</th>\n                        <th>Name</th>\n                        <th>Rarity</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {this\n                        .servants()\n                        .map((servant, index) => {\n                            const route = `/${this.props.region}/servant/${servant.collectionNo}`;\n\n                            return <tr key={index}>\n                                <td align={\"center\"}>\n                                    <Link to={route}>\n                                        {servant.collectionNo}\n                                    </Link>\n                                </td>\n                                <td align={\"center\"}>\n                                    <ClassIcon className={servant.className} rarity={servant.rarity} height={50}/>\n                                </td>\n                                <td align={\"center\"}>\n                                    <Link to={route}>\n                                        <FaceIcon type={servant.type}\n                                                  rarity={servant.rarity}\n                                                  location={servant.face}\n                                                  height={50}/>\n                                    </Link>\n                                </td>\n                                <td>\n                                    <Link to={route}>\n                                        {servant.name}\n                                    </Link>\n                                </td>\n                                <td>\n                                    <RarityDescriptor rarity={servant.rarity}/>\n                                </td>\n                            </tr>\n                        })\n                    }\n                    </tbody>\n                </Table>\n            </div>\n        );\n    }\n\n}\n\nexport default ServantsPage;\n"],"sourceRoot":""}