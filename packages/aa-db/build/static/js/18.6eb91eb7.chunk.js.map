{"version":3,"sources":["Component/FaceIcon.tsx","Page/MysticCodesPage.tsx","Api/ResultCache.tsx","Api/Connection.tsx"],"names":["FaceIcon","alt","src","this","props","location","style","height","undefined","React","Component","MysticCodesPage","state","loading","mysticCodes","Connection","mysticCodeList","region","then","list","setState","e","error","id","striped","bordered","hover","responsive","textAlign","width","map","mysticCode","index","route","key","align","to","extraAssets","item","male","female","name","ResultCache","cache","Map","pending","pendingCatches","fetcher","duration","value","get","Promise","resolve","callbacks","reject","push","set","call","forEach","callback","delete","window","setTimeout","catch","host","fetch","endpoint","a","axios","response","data","buff","commandCode","commandCodes","craftEssence","craftEssenceList","func","noblePhantasm","quest","servant","servantList","skill","traitMap","language","Manager","query","LanguageOption","ENGLISH","Region","NA","getCommandCodeEssenceList","JP","DEFAULT","jp","na","names","entity","getCacheableCraftEssenceList","getCacheableMysticCodeList","phase","source","type","encodeURI","text","target","team"],"mappings":"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","file":"static/js/18.6eb91eb7.chunk.js","sourcesContent":["import React from \"react\";\nimport EntityType from \"../Api/Data/EntityType\";\n\ninterface IProps {\n    type?: EntityType;\n    rarity?: number;\n    location: string;\n    height?: number;\n}\n\nclass FaceIcon extends React.Component<IProps> {\n\n    render() {\n        return (\n            <img alt={''} src={this.props.location}\n                 style={this.props.height ? {height: this.props.height} : undefined}/>\n        );\n    }\n\n}\n\nexport default FaceIcon;\n","import {AxiosError} from \"axios\";\nimport React from \"react\";\nimport {Table} from \"react-bootstrap\";\nimport {Link} from \"react-router-dom\";\nimport Connection from \"../Api/Connection\";\nimport MysticCode from \"../Api/Data/MysticCode\";\nimport Region from \"../Api/Data/Region\";\nimport ErrorStatus from \"../Component/ErrorStatus\";\nimport FaceIcon from \"../Component/FaceIcon\";\nimport Loading from \"../Component/Loading\";\n\nimport \"./MysticCodesPage.css\";\n\ninterface IProps {\n    region: Region;\n}\n\ninterface IState {\n    error?: AxiosError;\n    loading: boolean;\n    mysticCodes: MysticCode[];\n}\n\nclass MysticCodesPage extends React.Component<IProps, IState> {\n    constructor(props: IProps) {\n        super(props);\n\n        this.state = {\n            loading: true,\n            mysticCodes: [],\n        };\n    }\n\n    componentDidMount() {\n        try {\n            Connection.mysticCodeList(this.props.region).then(list => {\n                this.setState({\n                    loading: false,\n                    mysticCodes: list\n                });\n            });\n        } catch (e) {\n            this.setState({\n                error: e\n            });\n        }\n    }\n\n    render() {\n        if (this.state.error)\n            return <ErrorStatus error={this.state.error}/>;\n\n        if (this.state.loading)\n            return <Loading/>;\n\n        return (\n            <div id={'mystic-codes'}>\n                <Table striped bordered hover responsive>\n                    <thead>\n                    <tr>\n                        <th style={{textAlign: \"center\", width: '1px'}}>#</th>\n                        <th style={{textAlign: \"center\", width: '140px'}}>Thumbnail</th>\n                        <th>Name</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {this.state.mysticCodes.map((mysticCode, index) => {\n                        const route = `/${this.props.region}/mystic-code/${mysticCode.id}`;\n\n                        return (\n                            <tr key={index}>\n                                <td align={\"center\"}>\n                                    <Link to={route}>\n                                        {mysticCode.id}\n                                    </Link>\n                                </td>\n                                <td align={\"center\"}>\n                                    <Link to={route}>\n                                        <FaceIcon location={mysticCode.extraAssets.item.male} height={50}/>\n                                        <FaceIcon location={mysticCode.extraAssets.item.female} height={50}/>\n                                    </Link>\n                                </td>\n                                <td>\n                                    <Link to={route}>\n                                        {mysticCode.name}\n                                    </Link>\n                                </td>\n                            </tr>\n                        );\n                    })}\n                    </tbody>\n                </Table>\n            </div>\n        );\n    }\n}\n\nexport default MysticCodesPage;\n","class ResultCache<K, V> {\n    private cache = new Map<K, V>();\n    private pending = new Map<K, Function[]>();\n    private pendingCatches = new Map<K, Function[]>();\n\n    get(key: K, fetcher: Function, duration: number | null): Promise<V> {\n        const value = this.cache.get(key);\n        if (value !== undefined) {\n            return new Promise<V>(resolve => {\n                resolve(value);\n            });\n        }\n\n        const callbacks = this.pending.get(key);\n        if (callbacks !== undefined) {\n            return new Promise<V>((resolve, reject) => {\n                callbacks.push(resolve);\n\n                const catches = this.pendingCatches.get(key) ?? [];\n                catches.push(reject);\n            });\n        }\n\n        this.pending.set(key, []);\n        this.pendingCatches.set(key, []);\n        return new Promise<V>((resolve, reject) => {\n            fetcher\n                .call(null)\n                .then((value: V) => {\n                    const callbacks = this.pending.get(key) ?? [];\n\n                    callbacks.forEach(callback => {\n                        callback.call(null, value);\n                    });\n\n                    this.cache.set(key, value);\n                    this.pending.delete(key);\n                    this.pendingCatches.delete(key);\n\n                    if (duration !== null) {\n                        window.setTimeout(() => {\n                            this.cache.delete(key);\n                        }, duration);\n                    }\n\n                    resolve(value);\n                })\n                .catch((error: any) => {\n                    const callbacks = this.pendingCatches.get(key) ?? [];\n\n                    callbacks.forEach(callback => {\n                        callback.call(null, error);\n                    });\n\n                    this.pending.delete(key);\n                    this.pendingCatches.delete(key);\n\n                    reject(error);\n                });\n        });\n    }\n}\n\nexport default ResultCache;\n","import axios from \"axios\";\nimport Manager from \"../Setting/Manager\";\nimport {LanguageOption} from \"../Setting/Option\";\nimport BasicListEntity from \"./Data/BasicListEntity\";\nimport Buff, {BuffType} from \"./Data/Buff\";\nimport CommandCode from \"./Data/CommandCode\";\nimport CraftEssence from \"./Data/CraftEssence\";\nimport Func, {FuncTargetTeam, FuncTargetType, FuncType} from \"./Data/Func\";\nimport MysticCode from \"./Data/MysticCode\";\nimport NoblePhantasm from \"./Data/NoblePhantasm\";\nimport Quest from \"./Data/Quest\";\nimport Region from \"./Data/Region\";\nimport Servant from \"./Data/Servant\";\nimport Skill from \"./Data/Skill\";\nimport TraitMap from \"./Data/TraitMap\";\nimport ResultCache from \"./ResultCache\";\n\nconst host = 'https://api.atlasacademy.io',\n    cacheDuration = 20 * 1000,\n    fetch = async function <T>(endpoint: string): Promise<T> {\n        const response = await axios.get<T>(endpoint);\n\n        return response.data;\n    },\n    cache = {\n        buff: new ResultCache<string, Buff>(),\n        commandCode: new ResultCache<string, CommandCode>(),\n        commandCodes: new ResultCache<Region, CommandCode[]>(),\n        craftEssence: new ResultCache<string, CraftEssence>(),\n        craftEssenceList: new ResultCache<Region, BasicListEntity[]>(),\n        func: new ResultCache<string, Func>(),\n        mysticCode: new ResultCache<string, MysticCode>(),\n        mysticCodeList: new ResultCache<Region, MysticCode[]>(),\n        noblePhantasm: new ResultCache<string, NoblePhantasm>(),\n        quest: new ResultCache<string, Quest>(),\n        servant: new ResultCache<string, Servant>(),\n        servantList: new ResultCache<string, BasicListEntity[]>(),\n        skill: new ResultCache<string, Skill>(),\n        traitMap: new ResultCache<Region, TraitMap>(),\n    };\n\nclass Connection {\n    static buff(region: Region, id: number): Promise<Buff> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.buff.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Buff>(`${host}/nice/${region}/buff/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static commandCode(region: Region, id: number): Promise<CommandCode> {\n        const key = `${region}-${id}`;\n\n        return cache.commandCode.get(\n            key,\n            () => {\n                return fetch<CommandCode>(`${host}/nice/${region}/CC/${id}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async commandCodeList(region: Region): Promise<CommandCode[]> {\n        if (region === Region.NA) {\n            return Connection.getCommandCodeEssenceList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCommandCodeEssenceList(Region.JP);\n        }\n\n        const jp = await Connection.getCommandCodeEssenceList(Region.JP),\n            na = await Connection.getCommandCodeEssenceList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static craftEssence(region: Region, id: number): Promise<CraftEssence> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.craftEssence.get(\n            key,\n            () => {\n                let query = '?lore=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Servant>(`${host}/nice/${region}/equip/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async craftEssenceList(region: Region): Promise<BasicListEntity[]> {\n        if (region === Region.NA) {\n            return Connection.getCacheableCraftEssenceList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCacheableCraftEssenceList(Region.JP);\n        }\n\n        const jp = await Connection.getCacheableCraftEssenceList(Region.JP),\n            na = await Connection.getCacheableCraftEssenceList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map<BasicListEntity>(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static func(region: Region, id: number): Promise<Func> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.func.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Func>(`${host}/nice/${region}/function/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static mysticCode(region: Region, id: number): Promise<MysticCode> {\n        const key = `${region}-${id}`;\n\n        return cache.mysticCode.get(\n            key,\n            () => {\n                return fetch<MysticCode>(`${host}/nice/${region}/MC/${id}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async mysticCodeList(region: Region): Promise<MysticCode[]> {\n        if (region === Region.NA) {\n            return Connection.getCacheableMysticCodeList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCacheableMysticCodeList(Region.JP);\n        }\n\n        const jp = await Connection.getCacheableMysticCodeList(Region.JP),\n            na = await Connection.getCacheableMysticCodeList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map<MysticCode>(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static noblePhantasm(region: Region, id: number): Promise<NoblePhantasm> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.noblePhantasm.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<NoblePhantasm>(`${host}/nice/${region}/NP/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static quest(region: Region, id: number, phase: number): Promise<Quest> {\n        const key = `${region}-${id}-${phase}`;\n\n        return cache.quest.get(\n            key,\n            () => {\n                return fetch<Quest>(`${host}/nice/${region}/quest/${id}/${phase}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static servant(region: Region, id: number): Promise<Servant> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.servant.get(\n            key,\n            () => {\n                let query = '?lore=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Servant>(`${host}/nice/${region}/servant/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async servantList(region: Region): Promise<BasicListEntity[]> {\n        const language = Manager.language(),\n            key = `${region}-${language}`;\n\n        let source: string;\n\n        if (region === Region.NA) {\n            source = `${host}/export/NA/basic_servant.json`;\n        } else if (region === Region.JP && language === LanguageOption.DEFAULT) {\n            source = `${host}/export/JP/basic_servant.json`;\n        } else {\n            source = `${host}/export/JP/basic_servant_lang_en.json`;\n        }\n\n        return cache.servantList.get(\n            key,\n            () => {\n                return fetch<BasicListEntity[]>(source);\n            },\n            null\n        );\n    }\n\n    static skill(region: Region, id: number): Promise<Skill> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.skill.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Skill>(`${host}/nice/${region}/skill/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static traitMap(region: Region): Promise<TraitMap> {\n        return cache.traitMap.get(\n            region,\n            () => {\n                return fetch<TraitMap>(`${host}/export/${region}/nice_trait.json`);\n            },\n            null\n        );\n    }\n\n    static searchBuffs(region: Region, name?: string, type?: BuffType): Promise<Buff[]> {\n        const language = Manager.language();\n\n        let query = \"?reverse=true\";\n\n        if (language === LanguageOption.ENGLISH)\n            query += \"&lang=en\";\n        if (name)\n            query += \"&name=\" + encodeURI(name);\n        if (type)\n            query += \"&type=\" + type;\n\n        return fetch<Buff[]>(`${host}/nice/${region}/buff/search${query}`);\n    }\n\n    static searchFuncs(region: Region,\n                       text?: string,\n                       type?: FuncType,\n                       target?: FuncTargetType,\n                       team?: FuncTargetTeam): Promise<Func[]> {\n        const language = Manager.language();\n\n        let query = \"?reverse=true\";\n\n        if (language === LanguageOption.ENGLISH)\n            query += \"&lang=en\";\n        if (text)\n            query += \"&popupText=\" + encodeURI(text);\n        if (type)\n            query += \"&type=\" + type;\n        if (target)\n            query += \"&targetType=\" + target;\n        if (team)\n            query += \"&targetTeam=\" + team;\n\n        return fetch<Func[]>(`${host}/nice/${region}/function/search${query}`);\n    }\n\n    private static async getCommandCodeEssenceList(region: Region): Promise<CommandCode[]> {\n        return cache.commandCodes.get(\n            region,\n            () => {\n                return fetch<CommandCode[]>(`${host}/export/${region}/nice_command_code.json`);\n            },\n            null\n        );\n    }\n\n    private static async getCacheableCraftEssenceList(region: Region): Promise<BasicListEntity[]> {\n        return cache.craftEssenceList.get(\n            region,\n            () => {\n                return fetch<BasicListEntity[]>(`${host}/export/${region}/basic_equip.json`);\n            },\n            null\n        );\n    }\n\n    private static async getCacheableMysticCodeList(region: Region): Promise<MysticCode[]> {\n        return cache.mysticCodeList.get(\n            region,\n            () => {\n                return fetch<BasicListEntity[]>(`${host}/export/${region}/nice_mystic_code.json`);\n            },\n            null\n        );\n    }\n}\n\nexport default Connection;\n"],"sourceRoot":""}