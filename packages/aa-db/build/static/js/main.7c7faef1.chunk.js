(this["webpackJsonpaa-db"]=this["webpackJsonpaa-db"]||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),i=a.n(c),l=a(27),s=a.n(l),o=a(6),u=a(7),h=a(11),v=a(10),m=(a(81),a(111)),d=a(24),E=a(8),p=a(48),g=a(69),f=a(41),b=a(118),y=a(117),k=a(68),S=a(112),O=a(115),j=a(116);!function(e){e.DEFAULT="Default",e.ENGLISH="English"}(n||(n={})),function(e){e.JP="JP",e.NA="NA"}(r||(r={}));var A,C=[],w=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"language",value:function(){var e=window.localStorage.getItem("language"),t=Object.values(n).find((function(t){return t===e}));return null!==t&&void 0!==t?t:n.DEFAULT}},{key:"region",value:function(){var e=window.localStorage.getItem("region"),t=Object.values(r).find((function(t){return t===e}));return null!==t&&void 0!==t?t:r.JP}},{key:"setLanguage",value:function(t){var a=Object.values(n).find((function(e){return e===t}));void 0!==a&&(window.localStorage.setItem("language",a),e.triggerCallbacks())}},{key:"setRegion",value:function(t){var a=Object.values(r).find((function(e){return e===t}));void 0!==a&&(window.localStorage.setItem("region",a),e.triggerCallbacks())}},{key:"onUpdate",value:function(e){C.push(e)}},{key:"triggerCallbacks",value:function(){C.forEach((function(e){e.call(null)}))}}]),e}(),N=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={region:w.region(),language:w.language()},w.onUpdate((function(){return n.syncSettings()})),n}return Object(u.a)(a,[{key:"syncSettings",value:function(){this.setState({region:w.region(),language:w.language()})}},{key:"updateLanguage",value:function(e){w.setLanguage(e)}},{key:"updateRegion",value:function(e){w.setRegion(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(j.a,null,i.a.createElement(j.a.Group,null,i.a.createElement(j.a.Label,null,"Region"),i.a.createElement(j.a.Control,{as:"select",value:this.state.region,onChange:function(t){return e.updateRegion(t.target.value)}},Object.values(r).map((function(e){return i.a.createElement("option",{value:e},e)})))),i.a.createElement(j.a.Group,null,i.a.createElement(j.a.Label,null,"Language"),i.a.createElement(j.a.Control,{as:"select",value:this.state.language,onChange:function(t){return e.updateLanguage(t.target.value)}},Object.values(n).map((function(e){return i.a.createElement("option",{value:e},e)}))))))}}]),a}(i.a.Component),R=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={showSettings:!1},n}return Object(u.a)(a,[{key:"hideSettings",value:function(){this.setState({showSettings:!1})}},{key:"showSettings",value:function(){this.setState({showSettings:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(b.a,{bg:"dark",variant:"dark",expand:"lg"},i.a.createElement(m.a,null,i.a.createElement(d.b,{to:"/",className:"navbar-brand"},"AA-DB"),i.a.createElement(b.a.Toggle,null),i.a.createElement(b.a.Collapse,null,i.a.createElement(y.a,null,i.a.createElement(d.b,{to:"/servants",className:"nav-link"},i.a.createElement(k.a,null,"Servants"))),i.a.createElement(y.a,{className:"ml-auto"},i.a.createElement(y.a.Link,{href:"https://discord.gg/TKJmuCR",target:"_blank"},i.a.createElement(f.a,{icon:p.a})),i.a.createElement(y.a.Link,{href:"https://github.com/atlasacademy/aa-db",target:"_blank"},i.a.createElement(f.a,{icon:p.b})),i.a.createElement(S.a,{variant:"primary",onClick:function(){return e.showSettings()}},i.a.createElement(f.a,{icon:g.a})))))),i.a.createElement(O.a,{show:this.state.showSettings,onHide:function(){return e.hideSettings()}},i.a.createElement(O.a.Header,{closeButton:!0},i.a.createElement(O.a.Title,null,"Settings")),i.a.createElement(O.a.Body,null,i.a.createElement(N,null))))}}]),a}(i.a.Component),I=a(21),L=a.n(I),x=a(74),D=a(31),G=a(114),T=a(64),B=a(63),_=a(50),H=a(73),M=a.n(H),P="https://api.atlasacademy.io",J=function(){var e=Object(D.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get(t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t;return(e=null!==(t=e)&&void 0!==t?t:w.region())===r.NA?"NA":"JP"},F=new Map,K=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"servant",value:function(e){var t="?lore=true"+(w.language()===n.ENGLISH?"&lang=en":"");return J("".concat(P,"/nice/").concat(U(),"/servant/").concat(e).concat(t))}},{key:"servantList",value:function(){var t=Object(D.a)(L.a.mark((function t(){var a,c,i;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w.region()!==r.NA){t.next=4;break}return t.abrupt("return",e.getCacheableServantList(r.NA));case 4:if(w.region()!==r.JP||w.language()!==n.DEFAULT){t.next=6;break}return t.abrupt("return",e.getCacheableServantList(r.JP));case 6:return t.next=8,e.getCacheableServantList(r.JP);case 8:return a=t.sent,t.next=11,e.getCacheableServantList(r.NA);case 11:return c=t.sent,i=new Map(c.map((function(e){return[e.id,e.name]}))),t.abrupt("return",a.map((function(e){var t;return Object(_.a)(Object(_.a)({},e),{},{name:null!==(t=i.get(e.id))&&void 0!==t?t:e.name})})));case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getCacheableServantList",value:function(){var e=Object(D.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(a=F.get(t))){e.next=3;break}return e.abrupt("return",a);case 3:return e.next=5,J("".concat(P,"/export/").concat(U(t),"/basic_servant.json"));case 5:return a=e.sent,F.set(t,a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),W=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e;return i.a.createElement("img",{alt:"",src:this.props.location,style:{height:null!==(e=this.props.height)&&void 0!==e?e:25}})}}]),a}(i.a.Component);!function(e){e.SABER="saber",e.ARCHER="archer",e.LANCER="lancer",e.RIDER="rider",e.CASTER="caster",e.ASSASSIN="assassin",e.BERSERKER="berserker",e.SHIELDER="shielder",e.RULER="ruler",e.ALTER_EGO="alterEgo",e.AVENGER="avenger",e.GRAND_CASTER="grandCaster",e.BEAST_II="beastII",e.BEAST_I="beastI",e.MOON_CANCER="moonCancer",e.BEAST_IIIR="beastIIIR",e.FOREIGNER="foreigner",e.BEAST_IIIL="beastIIIL",e.BEAST_UNKNOWN="beastUnknown",e.ALL="ALL"}(A||(A={}));var q=A,Q=new Map([[1,1],[2,1],[3,2],[4,3],[5,3]]),V=new Map([[q.SABER,1],[q.ARCHER,2],[q.LANCER,3],[q.RIDER,4],[q.CASTER,5],[q.ASSASSIN,6],[q.BERSERKER,7],[q.SHIELDER,8],[q.RULER,9],[q.ALTER_EGO,10],[q.AVENGER,11]]),$=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement("img",{alt:"",src:this.location(),style:this.props.height?{height:this.props.height}:void 0})}},{key:"location",value:function(){var e,t=V.has(this.props.className)?V.get(this.props.className):12,a=null!==(e=this.props.rarity)&&void 0!==e?e:5,n=Q.has(a)?Q.get(a):3;return"https://assets.atlasacademy.io/GameData/NA/ClassIcons/class".concat(n,"_").concat(t,".png")}}]),a}(i.a.Component),z=a(113),X=(a(106),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.props.header?i.a.createElement("div",{className:"data-header"},this.props.header):null,i.a.createElement(z.a,{bordered:!0,hover:!0,className:"data-table"},i.a.createElement("tbody",null,Object.keys(this.props.data).map((function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("th",null,t),i.a.createElement("td",null,e.props.data[t]))})))))}}]),a}(i.a.Component));var Y=function(){return i.a.createElement("div",null,"Loading ...")};function Z(e){return"".concat((null!==e&&void 0!==e?e:0)/10,"%")}a(107);var ee="https://assets.atlasacademy.io/GameData/JP/BuffIcons",te="".concat(ee,"/bufficon_337.png"),ae="".concat(ee,"/bufficon_349.png"),ne="".concat(ee,"/bufficon_303.png"),re="".concat(ee,"/bufficon_310.png"),ce=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={loading:!0,id:parseInt(n.props.id),servants:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.loadServant()}},{key:"loadServant",value:function(){var e=Object(D.a)(L.a.mark((function e(){var t,a,n,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([K.servantList(),K.servant(this.state.id)]);case 2:t=e.sent,a=Object(x.a)(t,2),n=a[0],r=a[1],this.setState({loading:!1,servants:n,servant:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeServant",value:function(e){this.props.history.push("/servant/".concat(e))}},{key:"render",value:function(){return this.state.loading?i.a.createElement(Y,null):i.a.createElement("div",{id:"servant"},this.renderServantPicker(),i.a.createElement("hr",null),i.a.createElement(G.a,null,i.a.createElement(T.a,null,this.renderServantMainData()),i.a.createElement(T.a,null,this.renderServantPortrait())),i.a.createElement("br",null),this.renderServantAdvancedData())}},{key:"renderServantPicker",value:function(){var e=this;return i.a.createElement("div",null,"Jump to:",i.a.createElement(B.a,{as:"select",custom:!0,onChange:function(t){e.changeServant(parseInt(t.target.value))},value:this.state.id},this.state.servants.map((function(e,t){return i.a.createElement("option",{key:t,value:e.collectionNo},e.name)}))))}},{key:"renderServantMainData",value:function(){return void 0===this.state.servant?null:i.a.createElement("div",null,i.a.createElement("h1",null,i.a.createElement($,{className:this.state.servant.className,rarity:this.state.servant.rarity}),"\xa0",this.state.servant.name),i.a.createElement(X,{data:{ID:this.state.servant.id,Collection:this.state.servant.collectionNo,Name:this.state.servant.name,Class:this.state.servant.className,Rarity:this.state.servant.rarity,Cost:this.state.servant.cost,"Max Lv.":this.state.servant.lvMax,"Max Hp":this.state.servant.hpMax,"Max Atk":this.state.servant.atkMax,Gender:this.state.servant.gender,Attribute:this.state.servant.attribute,Traits:this.state.servant.traits.map((function(e){return e.name})).join(", ")}}))}},{key:"renderServantPortrait",value:function(){return void 0===this.state.servant?null:i.a.createElement("div",null,i.a.createElement("img",{alt:this.state.servant.name,className:"profile",src:this.state.servant.extraAssets.charaGraph.ascension[1]}))}},{key:"renderServantAdvancedData",value:function(){if(void 0===this.state.servant)return null;var e=this.state.servant;return i.a.createElement("div",null,i.a.createElement(G.a,null,i.a.createElement(T.a,null,i.a.createElement(X,{header:i.a.createElement("div",null,i.a.createElement(W,{location:re}),"\xa0Crit Stars"),data:{"Star Absorb":e.starAbsorb,"Star Gen":Z(e.starGen)}}),i.a.createElement(X,{header:i.a.createElement("div",null,i.a.createElement(W,{location:te}),"\xa0Instant Death"),data:{"Death Chance":Z(e.instantDeathChance)}})),i.a.createElement(T.a,null,i.a.createElement(X,{header:i.a.createElement("div",null,i.a.createElement(W,{location:ne}),"\xa0NP Gain"),data:{Buster:Z(e.npGain.buster),Arts:Z(e.npGain.arts),Quick:Z(e.npGain.quick),Extra:Z(e.npGain.extra),Defense:Z(e.npGain.defence)}})),i.a.createElement(T.a,null,i.a.createElement(X,{header:i.a.createElement("div",null,i.a.createElement(W,{location:ae}),"\xa0 Hit Count"),data:{Buster:a.showHits(e.hitsDistribution.buster),Arts:a.showHits(e.hitsDistribution.arts),Quick:a.showHits(e.hitsDistribution.quick),Extra:a.showHits(e.hitsDistribution.extra)}}))))}}],[{key:"showHits",value:function(e){return void 0===e?"":i.a.createElement("span",null,e.map((function(e,t){return(t>0?", ":"")+e+"%"})),"\xa0-\xa0",e.length," Hits")}}]),a}(i.a.Component),ie=Object(E.f)(ce),le=function(e,t){return new Array(e).fill(null).map((function(e){return t})).join("")},se=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,le(this.props.rarity,"\u2605")+le(5-this.props.rarity,"\u2606"))}}]),a}(i.a.Component),oe=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement("img",{alt:"",src:this.props.location,style:this.props.height?{height:this.props.height}:void 0})}}]),a}(i.a.Component),ue=(a(108),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={loading:!0,servants:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;K.servantList().then((function(t){e.setState({loading:!1,servants:t})}))}},{key:"render",value:function(){return this.state.loading?i.a.createElement(Y,null):i.a.createElement("div",{id:"servants"},i.a.createElement(z.a,{striped:!0,bordered:!0,hover:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{style:{textAlign:"center",width:"1px"}},"#"),i.a.createElement("th",{style:{textAlign:"center",width:"1px"}},"Class"),i.a.createElement("th",{style:{textAlign:"center",width:"1px"}},"Thumbnail"),i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Rarity"))),i.a.createElement("tbody",null,this.state.servants.map((function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",{align:"center"},i.a.createElement(d.b,{to:"/servant/".concat(e.collectionNo)},e.collectionNo)),i.a.createElement("td",{align:"center"},i.a.createElement($,{className:e.className,rarity:e.rarity,height:50})),i.a.createElement("td",{align:"center"},i.a.createElement(d.b,{to:"/servant/".concat(e.collectionNo)},i.a.createElement(oe,{rarity:e.rarity,location:e.face,height:50}))),i.a.createElement("td",null,i.a.createElement(d.b,{to:"/servant/".concat(e.collectionNo)},e.name)),i.a.createElement("td",null,i.a.createElement(se,{rarity:e.rarity})))})))))}}]),a}(i.a.Component)),he=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={region:w.region(),language:w.language()},w.onUpdate((function(){return n.updateSettings()})),n}return Object(u.a)(a,[{key:"updateSettings",value:function(){this.setState({region:w.region(),language:w.language()})}},{key:"render",value:function(){return i.a.createElement(d.a,null,i.a.createElement(R,null),i.a.createElement("br",null),i.a.createElement(m.a,{key:"".concat(this.state.region,"-").concat(this.state.language)},i.a.createElement(E.c,null,i.a.createElement(E.a,{path:"/servants",component:ue}),i.a.createElement(E.a,{path:"/servant/:id",render:function(e){return i.a.createElement(ie,{key:e.match.params.id,id:e.match.params.id})}}),i.a.createElement(E.a,{path:"/",component:ue}))))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t,a){e.exports=a(109)}},[[76,1,2]]]);
//# sourceMappingURL=main.7c7faef1.chunk.js.map