{"version":3,"sources":["Helper/OutputHelper.tsx","Descriptor/TraitDescriptor.tsx","Component/BuffIcon.tsx","Api/Data/Buff.tsx","Descriptor/BuffDescriptor.tsx","Api/ResultCache.tsx","Api/Connection.tsx"],"names":["asPercent","value","pow","parseInt","decimal","Math","formatNumber","String","replace","handleNewLine","text","mergeElements","split","joinElements","elements","separator","parts","pushElement","element","undefined","length","previous","toString","push","forEach","index","seperator","Fragment","map","key","traitDescriptions","Map","TraitDescriptor","props","state","id","trait","this","Connection","traitMap","region","setState","name","get","getDescription","React","Component","BuffIcon","alt","src","location","style","height","verticalAlign","BuffType","upDownBuffs","up","ADD_MAXHP","down","SUB_MAXHP","description","UP_ATK","DOWN_ATK","UP_CHAGETD","UP_COMMANDATK","DOWN_COMMANDATK","UP_CRITICALDAMAGE","DOWN_CRITICALDAMAGE","UP_CRITICALPOINT","DOWN_CRITICALPOINT","UP_CRITICALRATE","DOWN_CRITICALRATE","UP_CRITICAL_RATE_DAMAGE_TAKEN","DOWN_CRITICAL_RATE_DAMAGE_TAKEN","UP_DAMAGE","DOWN_DAMAGE","UP_DAMAGEDROPNP","DOWN_DAMAGEDROPNP","UP_DEFENCE","DOWN_DEFENCE","UP_DEFENCECOMMANDALL","DOWN_DEFENCECOMMANDALL","UP_DROPNP","DOWN_DROPNP","UP_FUNC_HP_REDUCE","DOWN_FUNC_HP_REDUCE","UP_GRANT_INSTANTDEATH","DOWN_GRANT_INSTANTDEATH","UP_GRANTSTATE","DOWN_GRANTSTATE","UP_NONRESIST_INSTANTDEATH","UP_NPDAMAGE","DOWN_NPDAMAGE","UP_SPECIALDEFENCE","DOWN_SPECIALDEFENCE","UP_STARWEIGHT","DOWN_STARWEIGHT","UP_TOLERANCE","DOWN_TOLERANCE","UP_TOLERANCE_SUBSTATE","DOWN_TOLERANCE_SUBSTATE","typeDescriptions","AVOID_INSTANTDEATH","AVOID_STATE","ADD_DAMAGE","ADD_INDIVIDUALITY","AVOIDANCE","COMMANDCODEATTACK_FUNCTION","BREAK_AVOIDANCE","DELAY_FUNCTION","DONOT_NOBLE","DONOT_NOBLE_COND_MISMATCH","DONOT_RECOVERY","DONOT_SELECT_COMMANDCARD","DONOT_SKILL","FIELD_INDIVIDUALITY","GUTS","INVINCIBLE","MULTIATTACK","PIERCE_INVINCIBLE","REGAIN_HP","REGAIN_NP","REGAIN_STAR","SELFTURNEND_FUNCTION","SUB_SELFDAMAGE","TD_TYPE_CHANGE","UP_HATE","BuffDescriptor","getTraitFilters","traits","buff","ckSelfIndv","filter","indexOf","cards","hasApplicableTrait","join","ckOpIndv","traitIds","vals","x","traitId","type","has","isUpDownBuff","getUpDownDescription","getTraitFilterAppend","UP_COMMANDALL","getCommandCardTypes","getTraitFilterAppendWithoutCards","DOWN_COMMANDALL","ATTACK_FUNCTION","COMMANDATTACK_FUNCTION","COMMANDATTACK_BEFORE_FUNCTION","DAMAGE_FUNCTION","DEAD_FUNCTION","NPATTACK_PREV_BUFF","hasTypeDescription","getTypeDescription","hasTraitDescription","getTraitDescription","to","icon","getEffectiveTargetsDescriptions","ResultCache","cache","pending","pendingCatches","fetcher","duration","Promise","resolve","callbacks","reject","set","call","then","callback","delete","window","setTimeout","catch","error","host","fetch","endpoint","a","axios","response","data","commandCode","commandCodes","craftEssence","craftEssenceList","func","mysticCode","mysticCodeList","noblePhantasm","quest","servant","servantList","skill","language","Manager","query","LanguageOption","ENGLISH","Region","NA","getCommandCodeEssenceList","JP","DEFAULT","jp","na","names","entity","getCacheableCraftEssenceList","getCacheableMysticCodeList","phase","source","encodeURI","target","team"],"mappings":"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","file":"static/js/1.dcbf3053.chunk.js","sourcesContent":["import React from \"react\";\n\nexport type Renderable = (\n    JSX.Element\n    | string\n    | number\n    | undefined\n    )\n\nexport function asPercent(value: number | string | undefined, pow: number): string {\n    if (typeof value === \"string\")\n        return asPercent(parseInt(value), pow);\n\n    const decimal = (value ?? 0) / Math.pow(10, pow);\n\n    return `${decimal}%`;\n}\n\nexport function formatNumber(value: number): string {\n    return String(value).replace(/(.)(?=(\\d{3})+$)/g, '$1,');\n}\n\nexport function handleNewLine(text?: string): Renderable {\n    if (!text)\n        return \"\";\n\n    return (\n        <span>\n            {mergeElements(text.split(\"\\n\"), <br/>)}\n        </span>\n    );\n}\n\nexport function joinElements(elements: Renderable[], separator: Renderable): Renderable[] {\n    const parts: Renderable[] = [],\n        pushElement = function (element: Renderable) {\n            if (element === undefined)\n                return;\n\n            if (typeof element === 'object') {\n                parts.push(element);\n                return;\n            }\n\n            if (parts.length === 0) {\n                parts.push(element.toString());\n                return;\n            }\n\n            const previous = parts[parts.length - 1];\n            if (typeof previous !== 'string') {\n                parts.push(element.toString());\n                return;\n            }\n\n            parts[parts.length - 1] = previous + element.toString();\n        };\n\n    elements.forEach((element, index) => {\n        if (index > 0)\n            pushElement(separator);\n\n        pushElement(element);\n    });\n\n    return parts;\n}\n\nexport function mergeElements(elements: Renderable[], seperator: Renderable): Renderable {\n    return <React.Fragment>\n        {joinElements(elements, seperator).map((element, index) => {\n            return <React.Fragment key={index}>{element}</React.Fragment>;\n        })}\n    </React.Fragment>\n}\n","import React from \"react\";\nimport Connection from \"../Api/Connection\";\nimport Region from \"../Api/Data/Region\";\nimport Trait from \"../Api/Data/Trait\";\n\nconst traitDescriptions = new Map<number, string>([\n    [1, \"Gender:Male\"],\n    [2, \"Gender:Female\"],\n    [3, \"Gender:Unknown\"],\n    [100, \"Class:Saber\"],\n    [101, \"Class:Lancer\"],\n    [102, \"Class:Archer\"],\n    [103, \"Class:Rider\"],\n    [104, \"Class:Caster\"],\n    [105, \"Class:Assassin\"],\n    [106, \"Class:Berserker\"],\n    [107, \"Class:Shielder\"],\n    [108, \"Class:Ruler\"],\n    [109, \"Class:Alter Ego\"],\n    [110, \"Class:Avenger\"],\n    [111, \"Demon Pillar\"],\n    [112, \"Class:Grand Caster\"],\n    [113, \"Beast I\"],\n    [114, \"Beast II\"],\n    [115, \"Class:Moon Cancer\"],\n    [116, \"Beast IIIR\"],\n    [117, \"Class:Foreigner\"],\n    [118, \"Beast IIIL\"],\n    [119, \"Beast Unknown\"],\n    [200, \"Attribute:Sky\"],\n    [201, \"Attribute:Eart\"],\n    [202, \"Attribute:Human\"],\n    [203, \"Attribute:Star\"],\n    [204, \"Attribute:Beast\"],\n    [300, \"Alignment:Lawful\"],\n    [301, \"Alignment:Chaotic\"],\n    [302, \"Alignment:Neutral\"],\n    [303, \"Alignment:Good\"],\n    [304, \"Alignment:Evil\"],\n    [305, \"Alignment:Balanced\"],\n    [306, \"Alignment:Madness\"],\n    [308, \"Alignment:Summer\"],\n    [1000, \"Servant\"],\n    [1002, \"Undead\"],\n    [1122, \"Shadow Servant\"],\n    [2004, \"Roman\"],\n    [2005, \"Beasts\"],\n    [2019, \"Demonic\"],\n    [2039, \"Near Water\"],\n    [2386, \"Kingprotea: Proliferation\"],\n    [2387, \"Kingprotea: Growth\"],\n    [2466, \"Argonaut\"],\n    [2654, \"Pseudo-Servant\"],\n    [2664, \"Kingprotea: Proliferation NP Defense\"],\n    [3004, \"Buff\"],\n    [3005, \"Debuff\"],\n    [3006, \"Buff:Offensive\"],\n    [3007, \"Buff:Defensive\"],\n    [3011, \"Poison\"],\n    [3012, \"Charm\"],\n    [3015, \"Burn\"],\n    [3021, \"Evade\"],\n    [3026, \"Curse\"],\n    [3047, \"Pigify\"],\n    [4001, \"Card:Arts\"],\n    [4002, \"Card:Buster\"],\n    [4003, \"Card:Quick\"],\n    [4004, \"Card:Extra\"],\n    [4008, \"Player Card\"],\n    [4100, \"Critical Hit\"],\n]);\n\ninterface IProps {\n    region: Region;\n    trait: Trait | number;\n}\n\ninterface IState {\n    id: number;\n    trait?: Trait;\n}\n\nclass TraitDescriptor extends React.Component<IProps, IState> {\n    constructor(props: IProps) {\n        super(props);\n\n        this.state = {\n            id: typeof props.trait === \"number\" ? props.trait : props.trait.id,\n            trait: typeof props.trait === \"number\" ? undefined : props.trait,\n        };\n    }\n\n    async componentDidMount() {\n        if (this.state.trait)\n            return;\n\n        const traitMap = await Connection.traitMap(this.props.region);\n        if (traitMap[this.state.id] !== undefined)\n            this.setState({\n                trait: {\n                    id: this.state.id,\n                    name: traitMap[this.state.id]\n                }\n            });\n    }\n\n    private getDescription() : string {\n        let description;\n\n        description = traitDescriptions.get(this.state.id);\n        if (description) {\n            return description;\n        }\n\n        if (this.state.trait && this.state.trait.name !== 'unknown')\n            return this.state.trait.name;\n\n        return `unknown(${this.state.id})`;\n    }\n\n    render() {\n        return (\n            <span>\n                [{this.getDescription()}]\n            </span>\n        );\n    }\n}\n\nexport default TraitDescriptor;\n","import React from \"react\";\n\ninterface IProp {\n    location: string;\n    height?: number;\n}\n\nclass BuffIcon extends React.Component<IProp> {\n\n    render() {\n        return (\n            <img alt={''} src={this.props.location} style={{\n                height: this.props.height ?? 25,\n                verticalAlign: \"bottom\",\n            }}/>\n        );\n    }\n\n}\n\nexport default BuffIcon;\n","import Func from \"./Func\";\nimport Trait from \"./Trait\";\n\nexport enum BuffType {\n    NONE = \"none\",\n    UP_COMMANDATK = \"upCommandatk\",\n    UP_STARWEIGHT = \"upStarweight\",\n    UP_CRITICALPOINT = \"upCriticalpoint\",\n    DOWN_CRITICALPOINT = \"downCriticalpoint\",\n    REGAIN_NP = \"regainNp\",\n    REGAIN_STAR = \"regainStar\",\n    REGAIN_HP = \"regainHp\",\n    REDUCE_HP = \"reduceHp\",\n    UP_ATK = \"upAtk\",\n    DOWN_ATK = \"downAtk\",\n    UP_DAMAGE = \"upDamage\",\n    DOWN_DAMAGE = \"downDamage\",\n    ADD_DAMAGE = \"addDamage\",\n    SUB_DAMAGE = \"subDamage\",\n    UP_NPDAMAGE = \"upNpdamage\",\n    DOWN_NPDAMAGE = \"downNpdamage\",\n    UP_DROPNP = \"upDropnp\",\n    UP_CRITICALDAMAGE = \"upCriticaldamage\",\n    DOWN_CRITICALDAMAGE = \"downCriticaldamage\",\n    UP_SELFDAMAGE = \"upSelfdamage\",\n    DOWN_SELFDAMAGE = \"downSelfdamage\",\n    ADD_SELFDAMAGE = \"addSelfdamage\",\n    SUB_SELFDAMAGE = \"subSelfdamage\",\n    AVOIDANCE = \"avoidance\",\n    BREAK_AVOIDANCE = \"breakAvoidance\",\n    INVINCIBLE = \"invincible\",\n    UP_GRANTSTATE = \"upGrantstate\",\n    DOWN_GRANTSTATE = \"downGrantstate\",\n    UP_TOLERANCE = \"upTolerance\",\n    DOWN_TOLERANCE = \"downTolerance\",\n    AVOID_STATE = \"avoidState\",\n    DONOT_ACT = \"donotAct\",\n    DONOT_SKILL = \"donotSkill\",\n    DONOT_NOBLE = \"donotNoble\",\n    DONOT_RECOVERY = \"donotRecovery\",\n    DISABLE_GENDER = \"disableGender\",\n    GUTS = \"guts\",\n    UP_HATE = \"upHate\",\n    ADD_INDIVIDUALITY = \"addIndividuality\",\n    SUB_INDIVIDUALITY = \"subIndividuality\",\n    UP_DEFENCE = \"upDefence\",\n    DOWN_DEFENCE = \"downDefence\",\n    UP_COMMANDSTAR = \"upCommandstar\",\n    UP_COMMANDNP = \"upCommandnp\",\n    UP_COMMANDALL = \"upCommandall\",\n    DOWN_COMMANDALL = \"downCommandall\",\n    DOWN_STARWEIGHT = \"downStarweight\",\n    REDUCE_NP = \"reduceNp\",\n    DOWN_DROPNP = \"downDropnp\",\n    UP_GAIN_HP = \"upGainHp\",\n    DOWN_GAIN_HP = \"downGainHp\",\n    DOWN_COMMANDATK = \"downCommandatk\",\n    DOWN_COMMANSTAR = \"downCommanstar\",\n    DOWN_COMMANDNP = \"downCommandnp\",\n    UP_CRITICALRATE = \"upCriticalrate\",\n    DOWN_CRITICALRATE = \"downCriticalrate\",\n    PIERCE_INVINCIBLE = \"pierceInvincible\",\n    AVOID_INSTANTDEATH = \"avoidInstantdeath\",\n    UP_RESIST_INSTANTDEATH = \"upResistInstantdeath\",\n    UP_NONRESIST_INSTANTDEATH = \"upNonresistInstantdeath\",\n    DELAY_FUNCTION = \"delayFunction\",\n    REGAIN_NP_USED_NOBLE = \"regainNpUsedNoble\",\n    DEAD_FUNCTION = \"deadFunction\",\n    UP_MAXHP = \"upMaxhp\",\n    DOWN_MAXHP = \"downMaxhp\",\n    ADD_MAXHP = \"addMaxhp\",\n    SUB_MAXHP = \"subMaxhp\",\n    BATTLESTART_FUNCTION = \"battlestartFunction\",\n    WAVESTART_FUNCTION = \"wavestartFunction\",\n    SELFTURNEND_FUNCTION = \"selfturnendFunction\",\n    UP_GIVEGAIN_HP = \"upGivegainHp\",\n    DOWN_GIVEGAIN_HP = \"downGivegainHp\",\n    COMMANDATTACK_FUNCTION = \"commandattackFunction\",\n    DEADATTACK_FUNCTION = \"deadattackFunction\",\n    UP_SPECIALDEFENCE = \"upSpecialdefence\",\n    DOWN_SPECIALDEFENCE = \"downSpecialdefence\",\n    UP_DAMAGEDROPNP = \"upDamagedropnp\",\n    DOWN_DAMAGEDROPNP = \"downDamagedropnp\",\n    ENTRY_FUNCTION = \"entryFunction\",\n    UP_CHAGETD = \"upChagetd\",\n    REFLECTION_FUNCTION = \"reflectionFunction\",\n    UP_GRANT_SUBSTATE = \"upGrantSubstate\",\n    DOWN_GRANT_SUBSTATE = \"downGrantSubstate\",\n    UP_TOLERANCE_SUBSTATE = \"upToleranceSubstate\",\n    DOWN_TOLERANCE_SUBSTATE = \"downToleranceSubstate\",\n    UP_GRANT_INSTANTDEATH = \"upGrantInstantdeath\",\n    DOWN_GRANT_INSTANTDEATH = \"downGrantInstantdeath\",\n    GUTS_RATIO = \"gutsRatio\",\n    DAMAGE_FUNCTION = \"damageFunction\",\n    UP_DEFENCECOMMANDALL = \"upDefencecommandall\",\n    DOWN_DEFENCECOMMANDALL = \"downDefencecommandall\",\n    OVERWRITE_BATTLECLASS = \"overwriteBattleclass\",\n    OVERWRITE_CLASSRELATIO_ATK = \"overwriteClassrelatioAtk\",\n    OVERWRITE_CLASSRELATIO_DEF = \"overwriteClassrelatioDef\",\n    UP_DAMAGE_INDIVIDUALITY = \"upDamageIndividuality\",\n    DOWN_DAMAGE_INDIVIDUALITY = \"downDamageIndividuality\",\n    UP_DAMAGE_INDIVIDUALITY_ACTIVEONLY = \"upDamageIndividualityActiveonly\",\n    DOWN_DAMAGE_INDIVIDUALITY_ACTIVEONLY = \"downDamageIndividualityActiveonly\",\n    UP_NPTURNVAL = \"upNpturnval\",\n    DOWN_NPTURNVAL = \"downNpturnval\",\n    MULTIATTACK = \"multiattack\",\n    UP_GIVE_NP = \"upGiveNp\",\n    DOWN_GIVE_NP = \"downGiveNp\",\n    UP_RESISTANCE_DELAY_NPTURN = \"upResistanceDelayNpturn\",\n    DOWN_RESISTANCE_DELAY_NPTURN = \"downResistanceDelayNpturn\",\n    PIERCE_DEFENCE = \"pierceDefence\",\n    UP_GUTS_HP = \"upGutsHp\",\n    DOWN_GUTS_HP = \"downGutsHp\",\n    UP_FUNCGAIN_NP = \"upFuncgainNp\",\n    DOWN_FUNCGAIN_NP = \"downFuncgainNp\",\n    UP_FUNC_HP_REDUCE = \"upFuncHpReduce\",\n    DOWN_FUNC_HP_REDUCE = \"downFuncHpReduce\",\n    UP_DEFENCECOMMAN_DAMAGE = \"upDefencecommanDamage\",\n    DOWN_DEFENCECOMMAN_DAMAGE = \"downDefencecommanDamage\",\n    NPATTACK_PREV_BUFF = \"npattackPrevBuff\",\n    FIX_COMMANDCARD = \"fixCommandcard\",\n    DONOT_GAINNP = \"donotGainnp\",\n    FIELD_INDIVIDUALITY = \"fieldIndividuality\",\n    DONOT_ACT_COMMANDTYPE = \"donotActCommandtype\",\n    UP_DAMAGE_EVENT_POINT = \"upDamageEventPoint\",\n    UP_DAMAGE_SPECIAL = \"upDamageSpecial\",\n    ATTACK_FUNCTION = \"attackFunction\",\n    COMMANDCODEATTACK_FUNCTION = \"commandcodeattackFunction\",\n    DONOT_NOBLE_COND_MISMATCH = \"donotNobleCondMismatch\",\n    DONOT_SELECT_COMMANDCARD = \"donotSelectCommandcard\",\n    DONOT_REPLACE = \"donotReplace\",\n    SHORTEN_USER_EQUIP_SKILL = \"shortenUserEquipSkill\",\n    TD_TYPE_CHANGE = \"tdTypeChange\",\n    OVERWRITE_CLASS_RELATION = \"overwriteClassRelation\",\n    TD_TYPE_CHANGE_ARTS = \"tdTypeChangeArts\",\n    TD_TYPE_CHANGE_BUSTER = \"tdTypeChangeBuster\",\n    TD_TYPE_CHANGE_QUICK = \"tdTypeChangeQuick\",\n    COMMANDATTACK_BEFORE_FUNCTION = \"commandattackBeforeFunction\",\n    GUTS_FUNCTION = \"gutsFunction\",\n    UP_CRITICAL_RATE_DAMAGE_TAKEN = \"upCriticalRateDamageTaken\",\n    DOWN_CRITICAL_RATE_DAMAGE_TAKEN = \"downCriticalRateDamageTaken\",\n    UP_CRITICAL_STAR_DAMAGE_TAKEN = \"upCriticalStarDamageTaken\",\n    DOWN_CRITICAL_STAR_DAMAGE_TAKEN = \"downCriticalStarDamageTaken\",\n}\n\nexport default interface Buff {\n    id: number;\n    name: string;\n    detail: string;\n    icon: string;\n    type: BuffType;\n    vals: Trait[];\n    tvals: Trait[];\n    ckSelfIndv: Trait[];\n    ckOpIndv: Trait[];\n    maxRate: number;\n    reverseFunctions: Func[];\n}\n","import React from \"react\";\nimport {Link} from \"react-router-dom\";\nimport Buff, {BuffType} from \"../Api/Data/Buff\";\nimport Region from \"../Api/Data/Region\";\nimport BuffIcon from \"../Component/BuffIcon\";\nimport {joinElements, mergeElements} from \"../Helper/OutputHelper\";\nimport TraitDescriptor from \"./TraitDescriptor\";\n\nexport const upDownBuffs: { up?: BuffType, down?: BuffType, description: string }[] = [\n    {up: BuffType.ADD_MAXHP, down: BuffType.SUB_MAXHP, description: \"Max HP\"},\n    {up: BuffType.UP_ATK, down: BuffType.DOWN_ATK, description: \"ATK\"},\n    {up: BuffType.UP_CHAGETD, down: undefined, description: \"Overcharge\"},\n    {up: BuffType.UP_COMMANDATK, down: BuffType.DOWN_COMMANDATK, description: \"ATK\"},\n    {up: BuffType.UP_CRITICALDAMAGE, down: BuffType.DOWN_CRITICALDAMAGE, description: \"Critical Damage\"},\n    {up: BuffType.UP_CRITICALPOINT, down: BuffType.DOWN_CRITICALPOINT, description: \"Star Drop Rate\"},\n    {up: BuffType.UP_CRITICALRATE, down: BuffType.DOWN_CRITICALRATE, description: \"Critical Rate\"},\n    {\n        up: BuffType.UP_CRITICAL_RATE_DAMAGE_TAKEN,\n        down: BuffType.DOWN_CRITICAL_RATE_DAMAGE_TAKEN,\n        description: \"Critical Rate Taken\"\n    },\n    {up: BuffType.UP_DAMAGE, down: BuffType.DOWN_DAMAGE, description: \"SP.DMG\"},\n    {up: BuffType.UP_DAMAGEDROPNP, down: BuffType.DOWN_DAMAGEDROPNP, description: \"NP Gain When Damaged\"},\n    {up: BuffType.UP_DEFENCE, down: BuffType.DOWN_DEFENCE, description: \"DEF\"},\n    {up: BuffType.UP_DEFENCECOMMANDALL, down: BuffType.DOWN_DEFENCECOMMANDALL, description: \"Resistance\"},\n    {up: BuffType.UP_DROPNP, down: BuffType.DOWN_DROPNP, description: \"NP Gain\"},\n    {up: BuffType.UP_FUNC_HP_REDUCE, down: BuffType.DOWN_FUNC_HP_REDUCE, description: \"DoT Effectiveness\"},\n    {up: BuffType.UP_GRANT_INSTANTDEATH, down: BuffType.DOWN_GRANT_INSTANTDEATH, description: \"Death Chance\"},\n    {up: BuffType.UP_GRANTSTATE, down: BuffType.DOWN_GRANTSTATE, description: \"Buff Chance\"},\n    {up: undefined, down: BuffType.UP_NONRESIST_INSTANTDEATH, description: \"Death Resist\"},\n    {up: BuffType.UP_NPDAMAGE, down: BuffType.DOWN_NPDAMAGE, description: \"NP Damage\"},\n    {up: BuffType.UP_SPECIALDEFENCE, down: BuffType.DOWN_SPECIALDEFENCE, description: \"SP.DEF\"},\n    {up: BuffType.UP_STARWEIGHT, down: BuffType.DOWN_STARWEIGHT, description: \"Star Weight\"},\n    {up: BuffType.UP_TOLERANCE, down: BuffType.DOWN_TOLERANCE, description: \"Debuff Resist\"},\n    {up: BuffType.UP_TOLERANCE_SUBSTATE, down: BuffType.DOWN_TOLERANCE_SUBSTATE, description: \"Buff Removal Resist\"},\n];\n\nexport const traitDescriptions = new Map<number, string>([\n    [3012, 'Charm'],\n    [3015, 'Burn'],\n    [3026, 'Curse'],\n    [3045, 'Stun'],\n]);\n\nexport const typeDescriptions = new Map<BuffType, string>([\n    [BuffType.AVOID_INSTANTDEATH, 'Immune to Death'],\n    [BuffType.AVOID_STATE, 'Immunity'],\n    [BuffType.ADD_DAMAGE, 'Damage Plus'],\n    [BuffType.ADD_INDIVIDUALITY, 'Add Trait'],\n    [BuffType.AVOIDANCE, 'Evade'],\n    [BuffType.COMMANDCODEATTACK_FUNCTION, 'Command Code Effect'],\n    [BuffType.BREAK_AVOIDANCE, 'Sure Hit'],\n    [BuffType.DELAY_FUNCTION, 'Trigger Skill after Duration'],\n    [BuffType.DONOT_NOBLE, 'NP Seal'],\n    [BuffType.DONOT_NOBLE_COND_MISMATCH, 'NP Block if Condition Failed'],\n    [BuffType.DONOT_RECOVERY, 'Recovery Disabled'],\n    [BuffType.DONOT_SELECT_COMMANDCARD, 'Do Not Shuffle In Cards'],\n    [BuffType.DONOT_SKILL, 'Skill Seal'],\n    [BuffType.FIELD_INDIVIDUALITY, 'Change Field Type'],\n    [BuffType.GUTS, 'Guts'],\n    [BuffType.INVINCIBLE, 'Invincible'],\n    [BuffType.MULTIATTACK, 'Multiple Hits'],\n    [BuffType.PIERCE_INVINCIBLE, 'Ignore Invincible'],\n    [BuffType.REGAIN_HP, 'HP Per Turn'],\n    [BuffType.REGAIN_NP, 'NP Per Turn'],\n    [BuffType.REGAIN_STAR, 'Stars Per Turn'],\n    [BuffType.SELFTURNEND_FUNCTION, 'Trigger Skill every Turn'],\n    [BuffType.SUB_SELFDAMAGE, 'Damage Cut'],\n    [BuffType.TD_TYPE_CHANGE, 'Change Noble Phantasm'],\n    [BuffType.UP_HATE, 'Taunt'],\n]);\n\ninterface IProps {\n    region: Region;\n    buff: Buff;\n}\n\nclass BuffDescriptor extends React.Component<IProps> {\n    private getTraitFilterAppend(): JSX.Element | undefined {\n        if (!this.getTraitFilters())\n            return undefined;\n\n        return <React.Fragment> for {this.getTraitFilters()}</React.Fragment>;\n    }\n\n    private getTraitFilterAppendWithoutCards(): JSX.Element | undefined {\n        const traits = this.props.buff.ckSelfIndv.filter(\n            trait => [4001, 4002, 4003, 4004].indexOf(trait.id) === -1\n        );\n\n        if (!traits.length)\n            return undefined;\n\n        return (\n            <React.Fragment>\n                {' '}\n                for\n                {' '}\n                {joinElements(\n                    traits.map(\n                        trait => <TraitDescriptor region={this.props.region} trait={trait}/>\n                    ),\n                    ' & '\n                )}\n            </React.Fragment>\n        );\n    }\n\n    private getCommandCardTypes(): string {\n        const cards = [];\n\n        if (this.hasApplicableTrait(4001)) {\n            cards.push('Arts');\n        }\n\n        if (this.hasApplicableTrait(4002)) {\n            cards.push('Buster');\n        }\n\n        if (this.hasApplicableTrait(4003)) {\n            cards.push('Quick');\n        }\n\n        if (this.hasApplicableTrait(4004)) {\n            cards.push('Extra');\n        }\n\n        if (!cards.length) {\n            cards.push('Command Card');\n        }\n\n        return cards.join(' & ');\n    }\n\n    private getEffectiveTargetsDescriptions(): JSX.Element | undefined {\n        const buff = this.props.buff;\n\n        if (!buff.ckOpIndv.length)\n            return undefined;\n\n        return (\n            <React.Fragment>\n                {' vs. '}\n                {joinElements(\n                    buff.ckOpIndv.map(trait => {\n                        return <TraitDescriptor region={this.props.region} trait={trait}/>;\n                    }),\n                    ' & '\n                ).map((element, index) => {\n                    return <React.Fragment key={index}>{element}</React.Fragment>;\n                })}\n            </React.Fragment>\n        );\n    }\n\n    private getTraitDescription(): string {\n        const buff = this.props.buff,\n            traitIds = buff.vals.map(trait => trait.id);\n\n        for (let x in traitIds) {\n            const traitId = traitIds[x],\n                description = traitDescriptions.get(traitId);\n\n            if (description !== undefined)\n                return description;\n        }\n\n        return \"\";\n    }\n\n    private getTraitFilters(): JSX.Element | undefined {\n        if (!this.props.buff.ckSelfIndv.length)\n            return undefined;\n\n        return (\n            <React.Fragment>\n                {mergeElements(\n                    this.props.buff.ckSelfIndv.map(\n                        trait => <TraitDescriptor region={this.props.region} trait={trait}/>\n                    ),\n                    ' & '\n                )}\n            </React.Fragment>\n        );\n    }\n\n    private getTypeDescription(): string {\n        const type = this.props.buff.type;\n\n        return typeDescriptions.get(type) ?? \"\";\n    }\n\n    private getUpDownDescription(): string {\n        const type = this.props.buff.type;\n\n        for (let x in upDownBuffs) {\n            if (upDownBuffs[x].up === type)\n                return `${upDownBuffs[x].description} Up`;\n            if (upDownBuffs[x].down === type)\n                return `${upDownBuffs[x].description} Down`;\n        }\n\n        return \"\";\n    }\n\n    private hasApplicableTrait(id: number): boolean {\n        const buff = this.props.buff;\n\n        return buff.ckSelfIndv.filter(trait => trait.id === id).length > 0;\n    }\n\n    private hasTraitDescription(): boolean {\n        const buff = this.props.buff,\n            traitIds = buff.vals.map(trait => trait.id);\n\n        for (let x in traitIds) {\n            const traitId = traitIds[x],\n                description = traitDescriptions.get(traitId);\n\n            if (description !== undefined)\n                return true;\n        }\n\n        return false;\n    }\n\n    private hasTypeDescription(): boolean {\n        const buff = this.props.buff;\n\n        return typeDescriptions.has(buff.type);\n    }\n\n    private isUpDownBuff(): boolean {\n        const type = this.props.buff.type;\n\n        for (let x in upDownBuffs) {\n            if (upDownBuffs[x].up === type || upDownBuffs[x].down === type)\n                return true;\n        }\n\n        return false;\n    }\n\n    render() {\n        const buff = this.props.buff;\n\n        let description: JSX.Element | string = buff.name;\n\n        if (this.isUpDownBuff()) {\n            description = <React.Fragment>\n                {this.getUpDownDescription()}\n                {this.getTraitFilterAppend()}\n            </React.Fragment>\n        } else if (buff.type === BuffType.UP_COMMANDALL) {\n            description = <React.Fragment>\n                {this.getCommandCardTypes()} Up\n                {this.getTraitFilterAppendWithoutCards()}\n            </React.Fragment>\n        } else if (buff.type === BuffType.DOWN_COMMANDALL) {\n            description = <React.Fragment>\n                {this.getCommandCardTypes()} Down\n                {this.getTraitFilterAppendWithoutCards()}\n            </React.Fragment>\n        } else if (buff.type === BuffType.ATTACK_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill on {this.getTraitFilters()} attacks\n            </React.Fragment>;\n        } else if (buff.type === BuffType.COMMANDATTACK_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill on {this.getTraitFilters()} cards\n            </React.Fragment>;\n        } else if (buff.type === BuffType.COMMANDATTACK_BEFORE_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill before {this.getTraitFilters()} cards\n            </React.Fragment>;\n        } else if (buff.type === BuffType.DAMAGE_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill on receiving {this.getTraitFilters()} attacks\n            </React.Fragment>;\n        } else if (buff.type === BuffType.DEAD_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill on death\n                {this.getTraitFilterAppend()}\n            </React.Fragment>;\n        } else if (buff.type === BuffType.NPATTACK_PREV_BUFF) {\n            description = <React.Fragment>\n                Trigger Skill on {this.getTraitFilters()} NP\n            </React.Fragment>;\n        } else if (this.hasTypeDescription()) {\n            description = <React.Fragment>\n                {this.getTypeDescription()}\n                {this.getTraitFilterAppend()}\n            </React.Fragment>;\n        } else if (this.hasTraitDescription()) {\n            description = <React.Fragment>\n                {this.getTraitDescription()}\n                {this.getTraitFilterAppend()}\n            </React.Fragment>;\n        }\n\n        return (\n            <Link to={`/${this.props.region}/buff/${buff.id}`}>\n                [\n                <BuffIcon location={buff.icon}/>\n                {' '}\n                {description}\n                {this.getEffectiveTargetsDescriptions()}\n                ]\n            </Link>\n        );\n    }\n}\n\nexport default BuffDescriptor;\n","class ResultCache<K, V> {\n    private cache = new Map<K, V>();\n    private pending = new Map<K, Function[]>();\n    private pendingCatches = new Map<K, Function[]>();\n\n    get(key: K, fetcher: Function, duration: number | null): Promise<V> {\n        const value = this.cache.get(key);\n        if (value !== undefined) {\n            return new Promise<V>(resolve => {\n                resolve(value);\n            });\n        }\n\n        const callbacks = this.pending.get(key);\n        if (callbacks !== undefined) {\n            return new Promise<V>((resolve, reject) => {\n                callbacks.push(resolve);\n\n                const catches = this.pendingCatches.get(key) ?? [];\n                catches.push(reject);\n            });\n        }\n\n        this.pending.set(key, []);\n        this.pendingCatches.set(key, []);\n        return new Promise<V>((resolve, reject) => {\n            fetcher\n                .call(null)\n                .then((value: V) => {\n                    const callbacks = this.pending.get(key) ?? [];\n\n                    callbacks.forEach(callback => {\n                        callback.call(null, value);\n                    });\n\n                    this.cache.set(key, value);\n                    this.pending.delete(key);\n                    this.pendingCatches.delete(key);\n\n                    if (duration !== null) {\n                        window.setTimeout(() => {\n                            this.cache.delete(key);\n                        }, duration);\n                    }\n\n                    resolve(value);\n                })\n                .catch((error: any) => {\n                    const callbacks = this.pendingCatches.get(key) ?? [];\n\n                    callbacks.forEach(callback => {\n                        callback.call(null, error);\n                    });\n\n                    this.pending.delete(key);\n                    this.pendingCatches.delete(key);\n\n                    reject(error);\n                });\n        });\n    }\n}\n\nexport default ResultCache;\n","import axios from \"axios\";\nimport Manager from \"../Setting/Manager\";\nimport {LanguageOption} from \"../Setting/Option\";\nimport BasicListEntity from \"./Data/BasicListEntity\";\nimport Buff, {BuffType} from \"./Data/Buff\";\nimport CommandCode from \"./Data/CommandCode\";\nimport CraftEssence from \"./Data/CraftEssence\";\nimport Func, {FuncTargetTeam, FuncTargetType, FuncType} from \"./Data/Func\";\nimport MysticCode from \"./Data/MysticCode\";\nimport NoblePhantasm from \"./Data/NoblePhantasm\";\nimport Quest from \"./Data/Quest\";\nimport Region from \"./Data/Region\";\nimport Servant from \"./Data/Servant\";\nimport Skill from \"./Data/Skill\";\nimport TraitMap from \"./Data/TraitMap\";\nimport ResultCache from \"./ResultCache\";\n\nconst host = 'https://api.atlasacademy.io',\n    cacheDuration = 20 * 1000,\n    fetch = async function <T>(endpoint: string): Promise<T> {\n        const response = await axios.get<T>(endpoint);\n\n        return response.data;\n    },\n    cache = {\n        buff: new ResultCache<string, Buff>(),\n        commandCode: new ResultCache<string, CommandCode>(),\n        commandCodes: new ResultCache<Region, CommandCode[]>(),\n        craftEssence: new ResultCache<string, CraftEssence>(),\n        craftEssenceList: new ResultCache<Region, BasicListEntity[]>(),\n        func: new ResultCache<string, Func>(),\n        mysticCode: new ResultCache<string, MysticCode>(),\n        mysticCodeList: new ResultCache<Region, MysticCode[]>(),\n        noblePhantasm: new ResultCache<string, NoblePhantasm>(),\n        quest: new ResultCache<string, Quest>(),\n        servant: new ResultCache<string, Servant>(),\n        servantList: new ResultCache<string, BasicListEntity[]>(),\n        skill: new ResultCache<string, Skill>(),\n        traitMap: new ResultCache<Region, TraitMap>(),\n    };\n\nclass Connection {\n    static buff(region: Region, id: number): Promise<Buff> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.buff.get(\n            key,\n            () => {\n                let query = '?reverse=true&reverseDepth=skillNp' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Buff>(`${host}/nice/${region}/buff/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static commandCode(region: Region, id: number): Promise<CommandCode> {\n        const key = `${region}-${id}`;\n\n        return cache.commandCode.get(\n            key,\n            () => {\n                return fetch<CommandCode>(`${host}/nice/${region}/CC/${id}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async commandCodeList(region: Region): Promise<CommandCode[]> {\n        if (region === Region.NA) {\n            return Connection.getCommandCodeEssenceList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCommandCodeEssenceList(Region.JP);\n        }\n\n        const jp = await Connection.getCommandCodeEssenceList(Region.JP),\n            na = await Connection.getCommandCodeEssenceList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static craftEssence(region: Region, id: number): Promise<CraftEssence> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.craftEssence.get(\n            key,\n            () => {\n                let query = '?lore=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Servant>(`${host}/nice/${region}/equip/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async craftEssenceList(region: Region): Promise<BasicListEntity[]> {\n        if (region === Region.NA) {\n            return Connection.getCacheableCraftEssenceList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCacheableCraftEssenceList(Region.JP);\n        }\n\n        const jp = await Connection.getCacheableCraftEssenceList(Region.JP),\n            na = await Connection.getCacheableCraftEssenceList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map<BasicListEntity>(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static func(region: Region, id: number): Promise<Func> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.func.get(\n            key,\n            () => {\n                let query = '?reverse=true&reverseDepth=servant' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Func>(`${host}/nice/${region}/function/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static mysticCode(region: Region, id: number): Promise<MysticCode> {\n        const key = `${region}-${id}`;\n\n        return cache.mysticCode.get(\n            key,\n            () => {\n                return fetch<MysticCode>(`${host}/nice/${region}/MC/${id}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async mysticCodeList(region: Region): Promise<MysticCode[]> {\n        if (region === Region.NA) {\n            return Connection.getCacheableMysticCodeList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCacheableMysticCodeList(Region.JP);\n        }\n\n        const jp = await Connection.getCacheableMysticCodeList(Region.JP),\n            na = await Connection.getCacheableMysticCodeList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map<MysticCode>(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static noblePhantasm(region: Region, id: number): Promise<NoblePhantasm> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.noblePhantasm.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<NoblePhantasm>(`${host}/nice/${region}/NP/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static quest(region: Region, id: number, phase: number): Promise<Quest> {\n        const key = `${region}-${id}-${phase}`;\n\n        return cache.quest.get(\n            key,\n            () => {\n                return fetch<Quest>(`${host}/nice/${region}/quest/${id}/${phase}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static servant(region: Region, id: number): Promise<Servant> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.servant.get(\n            key,\n            () => {\n                let query = '?lore=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Servant>(`${host}/nice/${region}/servant/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async servantList(region: Region): Promise<BasicListEntity[]> {\n        const language = Manager.language(),\n            key = `${region}-${language}`;\n\n        let source: string;\n\n        if (region === Region.NA) {\n            source = `${host}/export/NA/basic_servant.json`;\n        } else if (region === Region.JP && language === LanguageOption.DEFAULT) {\n            source = `${host}/export/JP/basic_servant.json`;\n        } else {\n            source = `${host}/export/JP/basic_servant_lang_en.json`;\n        }\n\n        return cache.servantList.get(\n            key,\n            () => {\n                return fetch<BasicListEntity[]>(source);\n            },\n            null\n        );\n    }\n\n    static skill(region: Region, id: number): Promise<Skill> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.skill.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Skill>(`${host}/nice/${region}/skill/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static traitMap(region: Region): Promise<TraitMap> {\n        return cache.traitMap.get(\n            region,\n            () => {\n                return fetch<TraitMap>(`${host}/export/${region}/nice_trait.json`);\n            },\n            null\n        );\n    }\n\n    static searchBuffs(region: Region, name?: string, type?: BuffType): Promise<Buff[]> {\n        const language = Manager.language();\n\n        let query = \"?reverse=true\";\n\n        if (language === LanguageOption.ENGLISH)\n            query += \"&lang=en\";\n        if (name)\n            query += \"&name=\" + encodeURI(name);\n        if (type)\n            query += \"&type=\" + type;\n\n        return fetch<Buff[]>(`${host}/nice/${region}/buff/search${query}`);\n    }\n\n    static searchFuncs(region: Region,\n                       text?: string,\n                       type?: FuncType,\n                       target?: FuncTargetType,\n                       team?: FuncTargetTeam): Promise<Func[]> {\n        const language = Manager.language();\n\n        let query = \"?reverse=true\";\n\n        if (language === LanguageOption.ENGLISH)\n            query += \"&lang=en\";\n        if (text)\n            query += \"&popupText=\" + encodeURI(text);\n        if (type)\n            query += \"&type=\" + type;\n        if (target)\n            query += \"&targetType=\" + target;\n        if (team)\n            query += \"&targetTeam=\" + team;\n\n        return fetch<Func[]>(`${host}/nice/${region}/function/search${query}`);\n    }\n\n    private static async getCommandCodeEssenceList(region: Region): Promise<CommandCode[]> {\n        return cache.commandCodes.get(\n            region,\n            () => {\n                return fetch<CommandCode[]>(`${host}/export/${region}/nice_command_code.json`);\n            },\n            null\n        );\n    }\n\n    private static async getCacheableCraftEssenceList(region: Region): Promise<BasicListEntity[]> {\n        return cache.craftEssenceList.get(\n            region,\n            () => {\n                return fetch<BasicListEntity[]>(`${host}/export/${region}/basic_equip.json`);\n            },\n            null\n        );\n    }\n\n    private static async getCacheableMysticCodeList(region: Region): Promise<MysticCode[]> {\n        return cache.mysticCodeList.get(\n            region,\n            () => {\n                return fetch<BasicListEntity[]>(`${host}/export/${region}/nice_mystic_code.json`);\n            },\n            null\n        );\n    }\n}\n\nexport default Connection;\n"],"sourceRoot":""}