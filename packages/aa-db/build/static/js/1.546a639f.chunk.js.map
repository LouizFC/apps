{"version":3,"sources":["Descriptor/TraitDescriptor.tsx","Component/BuffIcon.tsx","Api/Data/Buff.tsx","Descriptor/BuffDescriptor.tsx","Helper/OutputHelper.tsx","Api/ResultCache.tsx","Api/Connection.tsx"],"names":["traitDescriptions","Map","TraitDescriptor","props","state","id","trait","undefined","this","Connection","traitMap","region","setState","name","get","getDescription","React","Component","BuffIcon","alt","src","location","style","height","verticalAlign","BuffType","upDownBuffs","up","UP_ATK","down","DOWN_ATK","description","UP_CHAGETD","UP_COMMANDATK","DOWN_COMMANDATK","UP_CRITICALDAMAGE","DOWN_CRITICALDAMAGE","UP_CRITICALPOINT","DOWN_CRITICALPOINT","UP_CRITICALRATE","DOWN_CRITICALRATE","UP_CRITICAL_RATE_DAMAGE_TAKEN","DOWN_CRITICAL_RATE_DAMAGE_TAKEN","UP_DAMAGE","DOWN_DAMAGE","UP_DAMAGEDROPNP","DOWN_DAMAGEDROPNP","UP_DEFENCE","DOWN_DEFENCE","UP_DEFENCECOMMANDALL","DOWN_DEFENCECOMMANDALL","UP_DROPNP","DOWN_DROPNP","UP_FUNC_HP_REDUCE","DOWN_FUNC_HP_REDUCE","UP_GRANT_INSTANTDEATH","DOWN_GRANT_INSTANTDEATH","UP_GRANTSTATE","DOWN_GRANTSTATE","UP_NONRESIST_INSTANTDEATH","UP_NPDAMAGE","DOWN_NPDAMAGE","UP_STARWEIGHT","DOWN_STARWEIGHT","UP_TOLERANCE","DOWN_TOLERANCE","UP_TOLERANCE_SUBSTATE","DOWN_TOLERANCE_SUBSTATE","typeDescriptions","AVOID_INSTANTDEATH","AVOID_STATE","ADD_DAMAGE","ADD_INDIVIDUALITY","AVOIDANCE","BREAK_AVOIDANCE","DELAY_FUNCTION","DONOT_NOBLE","DONOT_NOBLE_COND_MISMATCH","DONOT_RECOVERY","DONOT_SELECT_COMMANDCARD","DONOT_SKILL","FIELD_INDIVIDUALITY","GUTS","INVINCIBLE","MULTIATTACK","PIERCE_INVINCIBLE","REGAIN_HP","REGAIN_NP","REGAIN_STAR","SELFTURNEND_FUNCTION","SUB_SELFDAMAGE","TD_TYPE_CHANGE","UP_HATE","BuffDescriptor","getTraitFilters","Fragment","traits","buff","ckSelfIndv","filter","indexOf","length","joinElements","map","cards","hasApplicableTrait","push","join","ckOpIndv","element","index","key","traitIds","vals","x","traitId","mergeElements","type","has","isUpDownBuff","getUpDownDescription","getTraitFilterAppend","UP_COMMANDALL","getCommandCardTypes","getTraitFilterAppendWithoutCards","DOWN_COMMANDALL","ATTACK_FUNCTION","COMMANDATTACK_FUNCTION","COMMANDATTACK_BEFORE_FUNCTION","DAMAGE_FUNCTION","DEAD_FUNCTION","NPATTACK_PREV_BUFF","hasTypeDescription","getTypeDescription","hasTraitDescription","getTraitDescription","to","icon","getEffectiveTargetsDescriptions","asPercent","value","pow","parseInt","decimal","Math","formatNumber","String","replace","handleNewLine","text","split","elements","separator","parts","pushElement","previous","toString","forEach","seperator","ResultCache","cache","pending","pendingCatches","fetcher","duration","Promise","resolve","callbacks","reject","set","call","then","callback","delete","window","setTimeout","catch","error","host","fetch","endpoint","a","axios","response","data","craftEssence","craftEssenceList","func","mysticCode","mysticCodeList","noblePhantasm","quest","servant","servantList","skill","language","Manager","query","LanguageOption","ENGLISH","Region","NA","getCacheableCraftEssenceList","JP","DEFAULT","jp","na","names","entity","getCacheableMysticCodeList","phase","getCacheableServantList","encodeURI","target","team"],"mappings":"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","file":"static/js/1.546a639f.chunk.js","sourcesContent":["import React from \"react\";\nimport Connection from \"../Api/Connection\";\nimport Region from \"../Api/Data/Region\";\nimport Trait from \"../Api/Data/Trait\";\n\nconst traitDescriptions = new Map<number, string>([\n    [1, \"Gender:Male\"],\n    [2, \"Gender:Female\"],\n    [3, \"Gender:Unknown\"],\n    [100, \"Class:Saber\"],\n    [101, \"Class:Lancer\"],\n    [102, \"Class:Archer\"],\n    [103, \"Class:Rider\"],\n    [104, \"Class:Caster\"],\n    [105, \"Class:Assassin\"],\n    [106, \"Class:Berserker\"],\n    [107, \"Class:Shielder\"],\n    [108, \"Class:Ruler\"],\n    [109, \"Class:Alter Ego\"],\n    [110, \"Class:Avenger\"],\n    [111, \"Demon Pillar\"],\n    [112, \"Class:Grand Caster\"],\n    [113, \"Beast I\"],\n    [114, \"Beast II\"],\n    [115, \"Class:Moon Cancer\"],\n    [116, \"Beast IIIR\"],\n    [117, \"Class:Foreigner\"],\n    [118, \"Beast IIIL\"],\n    [119, \"Beast Unknown\"],\n    [200, \"Attribute:Sky\"],\n    [201, \"Attribute:Eart\"],\n    [202, \"Attribute:Human\"],\n    [203, \"Attribute:Star\"],\n    [204, \"Attribute:Beast\"],\n    [300, \"Alignment:Lawful\"],\n    [301, \"Alignment:Chaotic\"],\n    [302, \"Alignment:Neutral\"],\n    [303, \"Alignment:Good\"],\n    [304, \"Alignment:Evil\"],\n    [305, \"Alignment:Balanced\"],\n    [306, \"Alignment:Madness\"],\n    [308, \"Alignment:Summer\"],\n    [1000, \"Servant\"],\n    [1002, \"Undead\"],\n    [1122, \"Shadow Servant\"],\n    [2004, \"Roman\"],\n    [2005, \"Beasts\"],\n    [2019, \"Demonic\"],\n    [2039, \"Near Water\"],\n    [2466, \"Argonaut\"],\n    [2654, \"Pseudo-Servant\"],\n    [3004, \"Buff\"],\n    [3005, \"Debuff\"],\n    [3006, \"Buff:Offensive\"],\n    [3007, \"Buff:Defensive\"],\n    [3011, \"Poison\"],\n    [3012, \"Charm\"],\n    [3015, \"Burn\"],\n    [3021, \"Evade\"],\n    [3026, \"Curse\"],\n    [3047, \"Pigify\"],\n    [4001, \"Card:Arts\"],\n    [4002, \"Card:Buster\"],\n    [4003, \"Card:Quick\"],\n    [4004, \"Card:Extra\"],\n    [4008, \"Player Card\"],\n    [4100, \"Critical Hit\"],\n]);\n\ninterface IProps {\n    region: Region;\n    trait: Trait | number;\n}\n\ninterface IState {\n    id: number;\n    trait?: Trait;\n}\n\nclass TraitDescriptor extends React.Component<IProps, IState> {\n    constructor(props: IProps) {\n        super(props);\n\n        this.state = {\n            id: typeof props.trait === \"number\" ? props.trait : props.trait.id,\n            trait: typeof props.trait === \"number\" ? undefined : props.trait,\n        };\n    }\n\n    async componentDidMount() {\n        if (this.state.trait)\n            return;\n\n        const traitMap = await Connection.traitMap(this.props.region);\n        if (traitMap[this.state.id] !== undefined)\n            this.setState({\n                trait: {\n                    id: this.state.id,\n                    name: traitMap[this.state.id]\n                }\n            });\n    }\n\n    private getDescription() : string {\n        let description;\n\n        description = traitDescriptions.get(this.state.id);\n        if (description) {\n            return description;\n        }\n\n        if (this.state.trait && this.state.trait.name !== 'unknown')\n            return this.state.trait.name;\n\n        return `unknown(${this.state.id})`;\n    }\n\n    render() {\n        return (\n            <span>\n                [{this.getDescription()}]\n            </span>\n        );\n    }\n}\n\nexport default TraitDescriptor;\n","import React from \"react\";\n\ninterface IProp {\n    location: string;\n    height?: number;\n}\n\nclass BuffIcon extends React.Component<IProp> {\n\n    render() {\n        return (\n            <img alt={''} src={this.props.location} style={{\n                height: this.props.height ?? 25,\n                verticalAlign: \"bottom\",\n            }}/>\n        );\n    }\n\n}\n\nexport default BuffIcon;\n","import Func from \"./Func\";\nimport Trait from \"./Trait\";\n\nexport enum BuffType {\n    NONE = \"none\",\n    UP_COMMANDATK = \"upCommandatk\",\n    UP_STARWEIGHT = \"upStarweight\",\n    UP_CRITICALPOINT = \"upCriticalpoint\",\n    DOWN_CRITICALPOINT = \"downCriticalpoint\",\n    REGAIN_NP = \"regainNp\",\n    REGAIN_STAR = \"regainStar\",\n    REGAIN_HP = \"regainHp\",\n    REDUCE_HP = \"reduceHp\",\n    UP_ATK = \"upAtk\",\n    DOWN_ATK = \"downAtk\",\n    UP_DAMAGE = \"upDamage\",\n    DOWN_DAMAGE = \"downDamage\",\n    ADD_DAMAGE = \"addDamage\",\n    SUB_DAMAGE = \"subDamage\",\n    UP_NPDAMAGE = \"upNpdamage\",\n    DOWN_NPDAMAGE = \"downNpdamage\",\n    UP_DROPNP = \"upDropnp\",\n    UP_CRITICALDAMAGE = \"upCriticaldamage\",\n    DOWN_CRITICALDAMAGE = \"downCriticaldamage\",\n    UP_SELFDAMAGE = \"upSelfdamage\",\n    DOWN_SELFDAMAGE = \"downSelfdamage\",\n    ADD_SELFDAMAGE = \"addSelfdamage\",\n    SUB_SELFDAMAGE = \"subSelfdamage\",\n    AVOIDANCE = \"avoidance\",\n    BREAK_AVOIDANCE = \"breakAvoidance\",\n    INVINCIBLE = \"invincible\",\n    UP_GRANTSTATE = \"upGrantstate\",\n    DOWN_GRANTSTATE = \"downGrantstate\",\n    UP_TOLERANCE = \"upTolerance\",\n    DOWN_TOLERANCE = \"downTolerance\",\n    AVOID_STATE = \"avoidState\",\n    DONOT_ACT = \"donotAct\",\n    DONOT_SKILL = \"donotSkill\",\n    DONOT_NOBLE = \"donotNoble\",\n    DONOT_RECOVERY = \"donotRecovery\",\n    DISABLE_GENDER = \"disableGender\",\n    GUTS = \"guts\",\n    UP_HATE = \"upHate\",\n    ADD_INDIVIDUALITY = \"addIndividuality\",\n    SUB_INDIVIDUALITY = \"subIndividuality\",\n    UP_DEFENCE = \"upDefence\",\n    DOWN_DEFENCE = \"downDefence\",\n    UP_COMMANDSTAR = \"upCommandstar\",\n    UP_COMMANDNP = \"upCommandnp\",\n    UP_COMMANDALL = \"upCommandall\",\n    DOWN_COMMANDALL = \"downCommandall\",\n    DOWN_STARWEIGHT = \"downStarweight\",\n    REDUCE_NP = \"reduceNp\",\n    DOWN_DROPNP = \"downDropnp\",\n    UP_GAIN_HP = \"upGainHp\",\n    DOWN_GAIN_HP = \"downGainHp\",\n    DOWN_COMMANDATK = \"downCommandatk\",\n    DOWN_COMMANSTAR = \"downCommanstar\",\n    DOWN_COMMANDNP = \"downCommandnp\",\n    UP_CRITICALRATE = \"upCriticalrate\",\n    DOWN_CRITICALRATE = \"downCriticalrate\",\n    PIERCE_INVINCIBLE = \"pierceInvincible\",\n    AVOID_INSTANTDEATH = \"avoidInstantdeath\",\n    UP_RESIST_INSTANTDEATH = \"upResistInstantdeath\",\n    UP_NONRESIST_INSTANTDEATH = \"upNonresistInstantdeath\",\n    DELAY_FUNCTION = \"delayFunction\",\n    REGAIN_NP_USED_NOBLE = \"regainNpUsedNoble\",\n    DEAD_FUNCTION = \"deadFunction\",\n    UP_MAXHP = \"upMaxhp\",\n    DOWN_MAXHP = \"downMaxhp\",\n    ADD_MAXHP = \"addMaxhp\",\n    SUB_MAXHP = \"subMaxhp\",\n    BATTLESTART_FUNCTION = \"battlestartFunction\",\n    WAVESTART_FUNCTION = \"wavestartFunction\",\n    SELFTURNEND_FUNCTION = \"selfturnendFunction\",\n    UP_GIVEGAIN_HP = \"upGivegainHp\",\n    DOWN_GIVEGAIN_HP = \"downGivegainHp\",\n    COMMANDATTACK_FUNCTION = \"commandattackFunction\",\n    DEADATTACK_FUNCTION = \"deadattackFunction\",\n    UP_SPECIALDEFENCE = \"upSpecialdefence\",\n    DOWN_SPECIALDEFENCE = \"downSpecialdefence\",\n    UP_DAMAGEDROPNP = \"upDamagedropnp\",\n    DOWN_DAMAGEDROPNP = \"downDamagedropnp\",\n    ENTRY_FUNCTION = \"entryFunction\",\n    UP_CHAGETD = \"upChagetd\",\n    REFLECTION_FUNCTION = \"reflectionFunction\",\n    UP_GRANT_SUBSTATE = \"upGrantSubstate\",\n    DOWN_GRANT_SUBSTATE = \"downGrantSubstate\",\n    UP_TOLERANCE_SUBSTATE = \"upToleranceSubstate\",\n    DOWN_TOLERANCE_SUBSTATE = \"downToleranceSubstate\",\n    UP_GRANT_INSTANTDEATH = \"upGrantInstantdeath\",\n    DOWN_GRANT_INSTANTDEATH = \"downGrantInstantdeath\",\n    GUTS_RATIO = \"gutsRatio\",\n    DAMAGE_FUNCTION = \"damageFunction\",\n    UP_DEFENCECOMMANDALL = \"upDefencecommandall\",\n    DOWN_DEFENCECOMMANDALL = \"downDefencecommandall\",\n    OVERWRITE_BATTLECLASS = \"overwriteBattleclass\",\n    OVERWRITE_CLASSRELATIO_ATK = \"overwriteClassrelatioAtk\",\n    OVERWRITE_CLASSRELATIO_DEF = \"overwriteClassrelatioDef\",\n    UP_DAMAGE_INDIVIDUALITY = \"upDamageIndividuality\",\n    DOWN_DAMAGE_INDIVIDUALITY = \"downDamageIndividuality\",\n    UP_DAMAGE_INDIVIDUALITY_ACTIVEONLY = \"upDamageIndividualityActiveonly\",\n    DOWN_DAMAGE_INDIVIDUALITY_ACTIVEONLY = \"downDamageIndividualityActiveonly\",\n    UP_NPTURNVAL = \"upNpturnval\",\n    DOWN_NPTURNVAL = \"downNpturnval\",\n    MULTIATTACK = \"multiattack\",\n    UP_GIVE_NP = \"upGiveNp\",\n    DOWN_GIVE_NP = \"downGiveNp\",\n    UP_RESISTANCE_DELAY_NPTURN = \"upResistanceDelayNpturn\",\n    DOWN_RESISTANCE_DELAY_NPTURN = \"downResistanceDelayNpturn\",\n    PIERCE_DEFENCE = \"pierceDefence\",\n    UP_GUTS_HP = \"upGutsHp\",\n    DOWN_GUTS_HP = \"downGutsHp\",\n    UP_FUNCGAIN_NP = \"upFuncgainNp\",\n    DOWN_FUNCGAIN_NP = \"downFuncgainNp\",\n    UP_FUNC_HP_REDUCE = \"upFuncHpReduce\",\n    DOWN_FUNC_HP_REDUCE = \"downFuncHpReduce\",\n    UP_DEFENCECOMMAN_DAMAGE = \"upDefencecommanDamage\",\n    DOWN_DEFENCECOMMAN_DAMAGE = \"downDefencecommanDamage\",\n    NPATTACK_PREV_BUFF = \"npattackPrevBuff\",\n    FIX_COMMANDCARD = \"fixCommandcard\",\n    DONOT_GAINNP = \"donotGainnp\",\n    FIELD_INDIVIDUALITY = \"fieldIndividuality\",\n    DONOT_ACT_COMMANDTYPE = \"donotActCommandtype\",\n    UP_DAMAGE_EVENT_POINT = \"upDamageEventPoint\",\n    UP_DAMAGE_SPECIAL = \"upDamageSpecial\",\n    ATTACK_FUNCTION = \"attackFunction\",\n    COMMANDCODEATTACK_FUNCTION = \"commandcodeattackFunction\",\n    DONOT_NOBLE_COND_MISMATCH = \"donotNobleCondMismatch\",\n    DONOT_SELECT_COMMANDCARD = \"donotSelectCommandcard\",\n    DONOT_REPLACE = \"donotReplace\",\n    SHORTEN_USER_EQUIP_SKILL = \"shortenUserEquipSkill\",\n    TD_TYPE_CHANGE = \"tdTypeChange\",\n    OVERWRITE_CLASS_RELATION = \"overwriteClassRelation\",\n    TD_TYPE_CHANGE_ARTS = \"tdTypeChangeArts\",\n    TD_TYPE_CHANGE_BUSTER = \"tdTypeChangeBuster\",\n    TD_TYPE_CHANGE_QUICK = \"tdTypeChangeQuick\",\n    COMMANDATTACK_BEFORE_FUNCTION = \"commandattackBeforeFunction\",\n    GUTS_FUNCTION = \"gutsFunction\",\n    UP_CRITICAL_RATE_DAMAGE_TAKEN = \"upCriticalRateDamageTaken\",\n    DOWN_CRITICAL_RATE_DAMAGE_TAKEN = \"downCriticalRateDamageTaken\",\n    UP_CRITICAL_STAR_DAMAGE_TAKEN = \"upCriticalStarDamageTaken\",\n    DOWN_CRITICAL_STAR_DAMAGE_TAKEN = \"downCriticalStarDamageTaken\",\n}\n\nexport default interface Buff {\n    id: number;\n    name: string;\n    detail: string;\n    icon: string;\n    type: BuffType;\n    vals: Trait[];\n    tvals: Trait[];\n    ckSelfIndv: Trait[];\n    ckOpIndv: Trait[];\n    maxRate: number;\n    reverseFunctions: Func[];\n}\n","import React from \"react\";\nimport {Link} from \"react-router-dom\";\nimport Buff, {BuffType} from \"../Api/Data/Buff\";\nimport Region from \"../Api/Data/Region\";\nimport BuffIcon from \"../Component/BuffIcon\";\nimport {joinElements, mergeElements} from \"../Helper/OutputHelper\";\nimport TraitDescriptor from \"./TraitDescriptor\";\n\nexport const upDownBuffs: { up?: BuffType, down?: BuffType, description: string }[] = [\n    {up: BuffType.UP_ATK, down: BuffType.DOWN_ATK, description: \"ATK\"},\n    {up: BuffType.UP_CHAGETD, down: undefined, description: \"Overcharge\"},\n    {up: BuffType.UP_COMMANDATK, down: BuffType.DOWN_COMMANDATK, description: \"ATK\"},\n    {up: BuffType.UP_CRITICALDAMAGE, down: BuffType.DOWN_CRITICALDAMAGE, description: \"Critical Damage\"},\n    {up: BuffType.UP_CRITICALPOINT, down: BuffType.DOWN_CRITICALPOINT, description: \"Star Drop Rate\"},\n    {up: BuffType.UP_CRITICALRATE, down: BuffType.DOWN_CRITICALRATE, description: \"Critical Rate\"},\n    {\n        up: BuffType.UP_CRITICAL_RATE_DAMAGE_TAKEN,\n        down: BuffType.DOWN_CRITICAL_RATE_DAMAGE_TAKEN,\n        description: \"Critical Rate Taken\"\n    },\n    {up: BuffType.UP_DAMAGE, down: BuffType.DOWN_DAMAGE, description: \"SP.DMG\"},\n    {up: BuffType.UP_DAMAGEDROPNP, down: BuffType.DOWN_DAMAGEDROPNP, description: \"NP Gain When Damaged\"},\n    {up: BuffType.UP_DEFENCE, down: BuffType.DOWN_DEFENCE, description: \"DEF\"},\n    {up: BuffType.UP_DEFENCECOMMANDALL, down: BuffType.DOWN_DEFENCECOMMANDALL, description: \"Resistance\"},\n    {up: BuffType.UP_DROPNP, down: BuffType.DOWN_DROPNP, description: \"NP Gain\"},\n    {up: BuffType.UP_FUNC_HP_REDUCE, down: BuffType.DOWN_FUNC_HP_REDUCE, description: \"DoT Effectiveness\"},\n    {up: BuffType.UP_GRANT_INSTANTDEATH, down: BuffType.DOWN_GRANT_INSTANTDEATH, description: \"Death Chance\"},\n    {up: BuffType.UP_GRANTSTATE, down: BuffType.DOWN_GRANTSTATE, description: \"Buff Chance\"},\n    {up: undefined, down: BuffType.UP_NONRESIST_INSTANTDEATH, description: \"Death Resist\"},\n    {up: BuffType.UP_NPDAMAGE, down: BuffType.DOWN_NPDAMAGE, description: \"NP Damage\"},\n    {up: BuffType.UP_STARWEIGHT, down: BuffType.DOWN_STARWEIGHT, description: \"Star Weight\"},\n    {up: BuffType.UP_TOLERANCE, down: BuffType.DOWN_TOLERANCE, description: \"Debuff Resist\"},\n    {up: BuffType.UP_TOLERANCE_SUBSTATE, down: BuffType.DOWN_TOLERANCE_SUBSTATE, description: \"Buff Removal Resist\"},\n];\n\nexport const traitDescriptions = new Map<number, string>([\n    [3012, 'Charm'],\n    [3015, 'Burn'],\n    [3026, 'Curse'],\n    [3045, 'Stun'],\n]);\n\nexport const typeDescriptions = new Map<BuffType, string>([\n    [BuffType.AVOID_INSTANTDEATH, 'Immune to Death'],\n    [BuffType.AVOID_STATE, 'Immunity'],\n    [BuffType.ADD_DAMAGE, 'Damage Plus'],\n    [BuffType.ADD_INDIVIDUALITY, 'Add Trait'],\n    [BuffType.AVOIDANCE, 'Evade'],\n    [BuffType.BREAK_AVOIDANCE, 'Sure Hit'],\n    [BuffType.DELAY_FUNCTION, 'Trigger Skill after Duration'],\n    [BuffType.DONOT_NOBLE, 'NP Seal'],\n    [BuffType.DONOT_NOBLE_COND_MISMATCH, 'NP Block if Condition Failed'],\n    [BuffType.DONOT_RECOVERY, 'Recovery Disabled'],\n    [BuffType.DONOT_SELECT_COMMANDCARD, 'Do Not Shuffle In Cards'],\n    [BuffType.DONOT_SKILL, 'Skill Seal'],\n    [BuffType.FIELD_INDIVIDUALITY, 'Change Field Type'],\n    [BuffType.GUTS, 'Guts'],\n    [BuffType.INVINCIBLE, 'Invincible'],\n    [BuffType.MULTIATTACK, 'Multiple Hits'],\n    [BuffType.PIERCE_INVINCIBLE, 'Ignore Invincible'],\n    [BuffType.REGAIN_HP, 'HP Per Turn'],\n    [BuffType.REGAIN_NP, 'NP Per Turn'],\n    [BuffType.REGAIN_STAR, 'Stars Per Turn'],\n    [BuffType.SELFTURNEND_FUNCTION, 'Trigger Skill after Duration'],\n    [BuffType.SUB_SELFDAMAGE, 'Damage Cut'],\n    [BuffType.TD_TYPE_CHANGE, 'Change Noble Phantasm'],\n    [BuffType.UP_HATE, 'Taunt'],\n]);\n\ninterface IProps {\n    region: Region;\n    buff: Buff;\n}\n\nclass BuffDescriptor extends React.Component<IProps> {\n    private getTraitFilterAppend(): JSX.Element | undefined {\n        if (!this.getTraitFilters())\n            return undefined;\n\n        return <React.Fragment> for {this.getTraitFilters()}</React.Fragment>;\n    }\n\n    private getTraitFilterAppendWithoutCards(): JSX.Element | undefined {\n        const traits = this.props.buff.ckSelfIndv.filter(\n            trait => [4001, 4002, 4003, 4004].indexOf(trait.id) === -1\n        );\n\n        if (!traits.length)\n            return undefined;\n\n        return (\n            <React.Fragment>\n                {' '}\n                for\n                {' '}\n                {joinElements(\n                    traits.map(\n                        trait => <TraitDescriptor region={this.props.region} trait={trait}/>\n                    ),\n                    ' & '\n                )}\n            </React.Fragment>\n        );\n    }\n\n    private getCommandCardTypes(): string {\n        const cards = [];\n\n        if (this.hasApplicableTrait(4001)) {\n            cards.push('Arts');\n        }\n\n        if (this.hasApplicableTrait(4002)) {\n            cards.push('Buster');\n        }\n\n        if (this.hasApplicableTrait(4003)) {\n            cards.push('Quick');\n        }\n\n        if (this.hasApplicableTrait(4004)) {\n            cards.push('Extra');\n        }\n\n        if (!cards.length) {\n            cards.push('Command Card');\n        }\n\n        return cards.join(' & ');\n    }\n\n    private getEffectiveTargetsDescriptions(): JSX.Element | undefined {\n        const buff = this.props.buff;\n\n        if (!buff.ckOpIndv.length)\n            return undefined;\n\n        return (\n            <React.Fragment>\n                {' vs. '}\n                {joinElements(\n                    buff.ckOpIndv.map(trait => {\n                        return <TraitDescriptor region={this.props.region} trait={trait}/>;\n                    }),\n                    ' & '\n                ).map((element, index) => {\n                    return <React.Fragment key={index}>{element}</React.Fragment>;\n                })}\n            </React.Fragment>\n        );\n    }\n\n    private getTraitDescription(): string {\n        const buff = this.props.buff,\n            traitIds = buff.vals.map(trait => trait.id);\n\n        for (let x in traitIds) {\n            const traitId = traitIds[x],\n                description = traitDescriptions.get(traitId);\n\n            if (description !== undefined)\n                return description;\n        }\n\n        return \"\";\n    }\n\n    private getTraitFilters(): JSX.Element | undefined {\n        if (!this.props.buff.ckSelfIndv.length)\n            return undefined;\n\n        return (\n            <React.Fragment>\n                {mergeElements(\n                    this.props.buff.ckSelfIndv.map(\n                        trait => <TraitDescriptor region={this.props.region} trait={trait}/>\n                    ),\n                    ' & '\n                )}\n            </React.Fragment>\n        );\n    }\n\n    private getTypeDescription(): string {\n        const type = this.props.buff.type;\n\n        return typeDescriptions.get(type) ?? \"\";\n    }\n\n    private getUpDownDescription(): string {\n        const type = this.props.buff.type;\n\n        for (let x in upDownBuffs) {\n            if (upDownBuffs[x].up === type)\n                return `${upDownBuffs[x].description} Up`;\n            if (upDownBuffs[x].down === type)\n                return `${upDownBuffs[x].description} Down`;\n        }\n\n        return \"\";\n    }\n\n    private hasApplicableTrait(id: number): boolean {\n        const buff = this.props.buff;\n\n        return buff.ckSelfIndv.filter(trait => trait.id === id).length > 0;\n    }\n\n    private hasTraitDescription(): boolean {\n        const buff = this.props.buff,\n            traitIds = buff.vals.map(trait => trait.id);\n\n        for (let x in traitIds) {\n            const traitId = traitIds[x],\n                description = traitDescriptions.get(traitId);\n\n            if (description !== undefined)\n                return true;\n        }\n\n        return false;\n    }\n\n    private hasTypeDescription(): boolean {\n        const buff = this.props.buff;\n\n        return typeDescriptions.has(buff.type);\n    }\n\n    private isUpDownBuff(): boolean {\n        const type = this.props.buff.type;\n\n        for (let x in upDownBuffs) {\n            if (upDownBuffs[x].up === type || upDownBuffs[x].down === type)\n                return true;\n        }\n\n        return false;\n    }\n\n    render() {\n        const buff = this.props.buff;\n\n        let description: JSX.Element | string = buff.name;\n\n        if (this.isUpDownBuff()) {\n            description = <React.Fragment>\n                {this.getUpDownDescription()}\n                {this.getTraitFilterAppend()}\n            </React.Fragment>\n        } else if (buff.type === BuffType.UP_COMMANDALL) {\n            description = <React.Fragment>\n                {this.getCommandCardTypes()} Up\n                {this.getTraitFilterAppendWithoutCards()}\n            </React.Fragment>\n        } else if (buff.type === BuffType.DOWN_COMMANDALL) {\n            description = <React.Fragment>\n                {this.getCommandCardTypes()} Down\n                {this.getTraitFilterAppendWithoutCards()}\n            </React.Fragment>\n        } else if (buff.type === BuffType.ATTACK_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill on {this.getTraitFilters()} attacks\n            </React.Fragment>;\n        } else if (buff.type === BuffType.COMMANDATTACK_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill on {this.getTraitFilters()} cards\n            </React.Fragment>;\n        } else if (buff.type === BuffType.COMMANDATTACK_BEFORE_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill before {this.getTraitFilters()} cards\n            </React.Fragment>;\n        } else if (buff.type === BuffType.DAMAGE_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill on receiving {this.getTraitFilters()} attacks\n            </React.Fragment>;\n        } else if (buff.type === BuffType.DEAD_FUNCTION) {\n            description = <React.Fragment>\n                Trigger Skill on death\n                {this.getTraitFilterAppend()}\n            </React.Fragment>;\n        } else if (buff.type === BuffType.NPATTACK_PREV_BUFF) {\n            description = <React.Fragment>\n                Trigger Skill on {this.getTraitFilters()} NP\n            </React.Fragment>;\n        } else if (this.hasTypeDescription()) {\n            description = <React.Fragment>\n                {this.getTypeDescription()}\n                {this.getTraitFilterAppend()}\n            </React.Fragment>;\n        } else if (this.hasTraitDescription()) {\n            description = <React.Fragment>\n                {this.getTraitDescription()}\n                {this.getTraitFilterAppend()}\n            </React.Fragment>;\n        }\n\n        return (\n            <Link to={`/${this.props.region}/buff/${buff.id}`}>\n                [\n                <BuffIcon location={buff.icon}/>\n                {' '}\n                {description}\n                {this.getEffectiveTargetsDescriptions()}\n                ]\n            </Link>\n        );\n    }\n}\n\nexport default BuffDescriptor;\n","import React from \"react\";\n\nexport type Renderable = (\n    JSX.Element\n    | string\n    | number\n    | undefined\n    )\n\nexport function asPercent(value: number | string | undefined, pow: number): string {\n    if (typeof value === \"string\")\n        return asPercent(parseInt(value), pow);\n\n    const decimal = (value ?? 0) / Math.pow(10, pow);\n\n    return `${decimal}%`;\n}\n\nexport function formatNumber(value: number): string {\n    return String(value).replace(/(.)(?=(\\d{3})+$)/g, '$1,');\n}\n\nexport function handleNewLine(text?: string): Renderable {\n    if (!text)\n        return \"\";\n\n    return (\n        <span>\n            {mergeElements(text.split(\"\\n\"), <br/>)}\n        </span>\n    );\n}\n\nexport function joinElements(elements: Renderable[], separator: Renderable): Renderable[] {\n    const parts: Renderable[] = [],\n        pushElement = function (element: Renderable) {\n            if (element === undefined)\n                return;\n\n            if (typeof element === 'object') {\n                parts.push(element);\n                return;\n            }\n\n            if (parts.length === 0) {\n                parts.push(element.toString());\n                return;\n            }\n\n            const previous = parts[parts.length - 1];\n            if (typeof previous !== 'string') {\n                parts.push(element.toString());\n                return;\n            }\n\n            parts[parts.length - 1] = previous + element.toString();\n        };\n\n    elements.forEach((element, index) => {\n        if (index > 0)\n            pushElement(separator);\n\n        pushElement(element);\n    });\n\n    return parts;\n}\n\nexport function mergeElements(elements: Renderable[], seperator: Renderable): Renderable {\n    return <React.Fragment>\n        {joinElements(elements, seperator).map((element, index) => {\n            return <React.Fragment key={index}>{element}</React.Fragment>;\n        })}\n    </React.Fragment>\n}\n","class ResultCache<K, V> {\n    private cache = new Map<K, V>();\n    private pending = new Map<K, Function[]>();\n    private pendingCatches = new Map<K, Function[]>();\n\n    get(key: K, fetcher: Function, duration: number | null): Promise<V> {\n        const value = this.cache.get(key);\n        if (value !== undefined) {\n            return new Promise<V>(resolve => {\n                resolve(value);\n            });\n        }\n\n        const callbacks = this.pending.get(key);\n        if (callbacks !== undefined) {\n            return new Promise<V>((resolve, reject) => {\n                callbacks.push(resolve);\n\n                const catches = this.pendingCatches.get(key) ?? [];\n                catches.push(reject);\n            });\n        }\n\n        this.pending.set(key, []);\n        this.pendingCatches.set(key, []);\n        return new Promise<V>((resolve, reject) => {\n            fetcher\n                .call(null)\n                .then((value: V) => {\n                    const callbacks = this.pending.get(key) ?? [];\n\n                    callbacks.forEach(callback => {\n                        callback.call(null, value);\n                    });\n\n                    this.cache.set(key, value);\n                    this.pending.delete(key);\n                    this.pendingCatches.delete(key);\n\n                    if (duration !== null) {\n                        window.setTimeout(() => {\n                            this.cache.delete(key);\n                        }, duration);\n                    }\n\n                    resolve(value);\n                })\n                .catch((error: any) => {\n                    const callbacks = this.pendingCatches.get(key) ?? [];\n\n                    callbacks.forEach(callback => {\n                        callback.call(null, error);\n                    });\n\n                    this.pending.delete(key);\n                    this.pendingCatches.delete(key);\n\n                    reject(error);\n                });\n        });\n    }\n}\n\nexport default ResultCache;\n","import axios from \"axios\";\nimport Manager from \"../Setting/Manager\";\nimport {LanguageOption} from \"../Setting/Option\";\nimport BasicListEntity from \"./Data/BasicListEntity\";\nimport Buff, {BuffType} from \"./Data/Buff\";\nimport CraftEssence from \"./Data/CraftEssence\";\nimport Func, {FuncTargetTeam, FuncTargetType, FuncType} from \"./Data/Func\";\nimport MysticCode from \"./Data/MysticCode\";\nimport NoblePhantasm from \"./Data/NoblePhantasm\";\nimport Quest from \"./Data/Quest\";\nimport Region from \"./Data/Region\";\nimport Servant from \"./Data/Servant\";\nimport Skill from \"./Data/Skill\";\nimport TraitMap from \"./Data/TraitMap\";\nimport ResultCache from \"./ResultCache\";\n\nconst host = 'https://api.atlasacademy.io',\n    cacheDuration = 20 * 1000,\n    fetch = async function <T>(endpoint: string): Promise<T> {\n        const response = await axios.get<T>(endpoint);\n\n        return response.data;\n    },\n    cache = {\n        buff: new ResultCache<string, Buff>(),\n        craftEssence: new ResultCache<string, CraftEssence>(),\n        craftEssenceList: new ResultCache<Region, BasicListEntity[]>(),\n        func: new ResultCache<string, Func>(),\n        mysticCode: new ResultCache<string, MysticCode>(),\n        mysticCodeList: new ResultCache<Region, MysticCode[]>(),\n        noblePhantasm: new ResultCache<string, NoblePhantasm>(),\n        quest: new ResultCache<string, Quest>(),\n        servant: new ResultCache<string, Servant>(),\n        servantList: new ResultCache<Region, BasicListEntity[]>(),\n        skill: new ResultCache<string, Skill>(),\n        traitMap: new ResultCache<Region, TraitMap>(),\n    };\n\nclass Connection {\n    static buff(region: Region, id: number): Promise<Buff> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.buff.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Buff>(`${host}/nice/${region}/buff/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static craftEssence(region: Region, id: number): Promise<CraftEssence> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.craftEssence.get(\n            key,\n            () => {\n                let query = '?lore=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Servant>(`${host}/nice/${region}/equip/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async craftEssenceList(region: Region): Promise<BasicListEntity[]> {\n        if (region === Region.NA) {\n            return Connection.getCacheableCraftEssenceList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCacheableCraftEssenceList(Region.JP);\n        }\n\n        const jp = await Connection.getCacheableCraftEssenceList(Region.JP),\n            na = await Connection.getCacheableCraftEssenceList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map<BasicListEntity>(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static func(region: Region, id: number): Promise<Func> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.func.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Func>(`${host}/nice/${region}/function/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static mysticCode(region: Region, id: number): Promise<MysticCode> {\n        const key = `${region}-${id}`;\n\n        return cache.mysticCode.get(\n            key,\n            () => {\n                return fetch<MysticCode>(`${host}/nice/${region}/MC/${id}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async mysticCodeList(region: Region): Promise<MysticCode[]> {\n        if (region === Region.NA) {\n            return Connection.getCacheableMysticCodeList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCacheableMysticCodeList(Region.JP);\n        }\n\n        const jp = await Connection.getCacheableMysticCodeList(Region.JP),\n            na = await Connection.getCacheableMysticCodeList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map<MysticCode>(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static noblePhantasm(region: Region, id: number): Promise<NoblePhantasm> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.noblePhantasm.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<NoblePhantasm>(`${host}/nice/${region}/NP/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static quest(region: Region, id: number, phase: number): Promise<Quest> {\n        const key = `${region}-${id}-${phase}`;\n\n        return cache.quest.get(\n            key,\n            () => {\n                return fetch<Quest>(`${host}/nice/${region}/quest/${id}/${phase}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static servant(region: Region, id: number): Promise<Servant> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.servant.get(\n            key,\n            () => {\n                let query = '?lore=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Servant>(`${host}/nice/${region}/servant/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static async servantList(region: Region): Promise<BasicListEntity[]> {\n        if (region === Region.NA) {\n            return Connection.getCacheableServantList(Region.NA);\n        } else if (region === Region.JP && Manager.language() === LanguageOption.DEFAULT) {\n            return Connection.getCacheableServantList(Region.JP);\n        }\n\n        const jp = await Connection.getCacheableServantList(Region.JP),\n            na = await Connection.getCacheableServantList(Region.NA),\n            names = new Map<number, string>(na.map(entity => [entity.id, entity.name]));\n\n        return jp.map<BasicListEntity>(entity => {\n            return {\n                ...entity,\n                name: names.get(entity.id) ?? entity.name,\n            };\n        });\n    }\n\n    static skill(region: Region, id: number): Promise<Skill> {\n        const language = Manager.language(),\n            key = `${region}-${language}-${id}`;\n\n        return cache.skill.get(\n            key,\n            () => {\n                let query = '?reverse=true' + (\n                    language === LanguageOption.ENGLISH ? '&lang=en' : ''\n                );\n\n                return fetch<Skill>(`${host}/nice/${region}/skill/${id}${query}`);\n            },\n            cacheDuration\n        );\n    }\n\n    static traitMap(region: Region): Promise<TraitMap> {\n        return cache.traitMap.get(\n            region,\n            () => {\n                return fetch<TraitMap>(`${host}/export/${region}/nice_trait.json`);\n            },\n            null\n        );\n    }\n\n    static searchBuffs(region: Region, name?: string, type?: BuffType): Promise<Buff[]> {\n        const language = Manager.language();\n\n        let query = \"?reverse=true\";\n\n        if (language === LanguageOption.ENGLISH)\n            query += \"&lang=en\";\n        if (name)\n            query += \"&name=\" + encodeURI(name);\n        if (type)\n            query += \"&type=\" + type;\n\n        return fetch<Buff[]>(`${host}/nice/${region}/buff/search${query}`);\n    }\n\n    static searchFuncs(region: Region,\n                       text?: string,\n                       type?: FuncType,\n                       target?: FuncTargetType,\n                       team?: FuncTargetTeam): Promise<Func[]> {\n        const language = Manager.language();\n\n        let query = \"?reverse=true\";\n\n        if (language === LanguageOption.ENGLISH)\n            query += \"&lang=en\";\n        if (text)\n            query += \"&popupText=\" + encodeURI(text);\n        if (type)\n            query += \"&type=\" + type;\n        if (target)\n            query += \"&targetType=\" + target;\n        if (team)\n            query += \"&targetTeam=\" + team;\n\n        return fetch<Func[]>(`${host}/nice/${region}/function/search${query}`);\n    }\n\n    private static async getCacheableCraftEssenceList(region: Region): Promise<BasicListEntity[]> {\n        return cache.craftEssenceList.get(\n            region,\n            () => {\n                return fetch<BasicListEntity[]>(`${host}/export/${region}/basic_equip.json`);\n            },\n            null\n        );\n    }\n\n    private static async getCacheableMysticCodeList(region: Region): Promise<MysticCode[]> {\n        return cache.mysticCodeList.get(\n            region,\n            () => {\n                return fetch<BasicListEntity[]>(`${host}/export/${region}/nice_mystic_code.json`);\n            },\n            null\n        );\n    }\n\n    private static async getCacheableServantList(region: Region): Promise<BasicListEntity[]> {\n        return cache.servantList.get(\n            region,\n            () => {\n                return fetch<BasicListEntity[]>(`${host}/export/${region}/basic_servant.json`);\n            },\n            null\n        );\n    }\n}\n\nexport default Connection;\n"],"sourceRoot":""}